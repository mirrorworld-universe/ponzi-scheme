System.register("chunks:///_virtual/account.ts",["./rollupPluginModLoBabelHelpers.js","cc","./string_utils.ts"],(function(t){var e,n,r,i,o,a,c,l,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Label,l=t.sys,s=t.Component},function(t){u=t.string_utils}],execute:function(){var p,f,y,d,g;o._RF.push({},"92d16ivPvNLGL7sQMLsG5AV","account",void 0);var h=a.ccclass,v=a.property;t("account",(p=h("account"),f=v({type:c}),p((g=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"labelName",g,i(e)),e}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.init=function(t){this.labelName.string=t},o.onLogoutClicked=function(){},o.onExploreClicked=function(){var t="https://explorer.testnet-chain.linfra.xyz/address/"+u.removeLeadingZeros(globalThis.ponzi.currentPlayer);l.openURL(t)},e}(s)).prototype,"labelName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/assets.ts",["./rollupPluginModLoBabelHelpers.js","cc","./string_utils.ts","./ponzi-controller.ts","./ccc_msg.ts"],(function(t){var e,i,n,o,r,s,l,a,c,u,p,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,l=t._decorator,a=t.Node,c=t.Label,u=t.Component},function(t){p=t.string_utils},function(t){g=t.ponzi_controller},function(t){d=t.ccc_msg}],execute:function(){var f,v,b,h,m;s._RF.push({},"8d2d7pnxfpJH4azfkHcbVBH","assets",void 0);var y=l.ccclass,_=l.property,w=(t("assets",(f=y("assets"),v=_({type:a}),f((m=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"labelParent",m,o(e)),e._inited=!1,e}i(e,t);var s=e.prototype;return s.start=function(){},s.update=function(t){this._inited||this.init()},s.init=function(){(null==window.getAssetsList?void 0:window.getAssetsList())&&(this._inited=!0,this.updateUI(),this.registerListeners())},s.registerListeners=function(){var t=this;g.instance.on(d.on_assetslist_update,(function(){t.updateUI()}))},s.updateUI=function(){var t=null==window.getAssetsList?void 0:window.getAssetsList();if(t){var e=new w,i=globalThis.ponzi.currentPlayer;for(var n in t)for(var o,s=t[n],l=r(s);!(o=l()).done;){var a=o.value,c=a[0],u=a[1];if(console.log(n,c,u),i==p.getHashFromSymbol(c))if("gpu"==n){var g=Number(u);e.gpu=g}else if("bitcoin"==n){var d=Number(u);e.bitcoin=d}else if("battery"==n){var f=Number(u);e.battery=f}else if("leiter"==n){var v=Number(u);e.leiter=v}else if("gold"==n){var b=Number(u);e.gold=b}else if("oil"==n){var h=Number(u);e.oil=h}}this.initWithObj(e)}},s.initWithObj=function(t){console.log("myObj:",t);var e=this.labelParent.children;e[0].getComponent(c).string=t.gpu,e[1].getComponent(c).string=t.bitcoin,e[2].getComponent(c).string=t.battery,e[3].getComponent(c).string=t.leiter,e[4].getComponent(c).string=t.gold,e[5].getComponent(c).string=t.oil},e}(u)).prototype,"labelParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=h))||b)),function(){this.gpu=void 0,this.bitcoin=void 0,this.battery=void 0,this.leiter=void 0,this.gold=void 0,this.oil=void 0});s._RF.pop()}}}));

System.register("chunks:///_virtual/button_raisingcapital.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./time_utils.ts","./component_state.ts","./ponzi_config.ts","./string_utils.ts"],(function(t){var e,n,i,r,a,s,o,u,c,l,p,d,h,f,m,b,w,g,v,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,u=t._decorator,c=t.Label,l=t.Button,p=t.log,d=t.sys,h=t.Component,f=t.warn},function(t){m=t.ponzi_controller},function(t){b=t.ccc_msg},function(t){w=t.time_utils},function(t){g=t.component_state},function(t){v=t.ponzi_config},function(t){_=t.string_utils}],execute:function(){var y,T,k,C,x,z,L;o._RF.push({},"534b2tDzAlF7JnGIhuhuB56","button_raisingcapital",void 0);var D=u.ccclass,R=u.property;t("button_raisingcapital",(y=D("button_raisingcapital"),T=R({type:c}),k=R({type:l}),y((z=e((x=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"label",z,r(e)),i(e,"button",L,r(e)),e._inited=!1,e.leftTime=void 0,e.endTime=void 0,e.startTime=void 0,e.timer=void 0,e}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(){var t=a(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._inited){t.next=3;break}return t.next=3,this.init();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.onBtnClicked=function(){var t=a(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.instance.sendCCCMsg(b.network_block_ui,!0),t.prev=1,t.next=4,null==window.checkDebt?void 0:window.checkDebt();case 4:m.instance.sendCCCMsg(b.show_pick_asset,!0),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),e=_.getSecondLine(t.t0.toString()),m.instance.sendCCCMsg(b.single_button_dialog,{content:e,btnText:"OK"});case 11:return t.prev=11,m.instance.sendCCCMsg(b.network_block_ui,!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,7,11,14]])})));return function(){return t.apply(this,arguments)}}(),o.init=function(){var t=a(s().mark((function t(){var e,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(globalThis.ponzi.gameState==g.game_ingame){t.next=3;break}return t.abrupt("return");case 3:if(e=globalThis.ponzi.currentPlayer){t.next=6;break}return t.abrupt("return");case 6:return n=null,t.prev=7,t.next=10,null==window.queryValue?void 0:window.queryValue(window.env.components.RaiseColddown,e);case 10:n=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),p("Can not find RaiseColddown component on entity");case 16:if(n){t.next=18;break}return t.abrupt("return");case 18:return this._inited=!0,t.next=21,this.updateUI();case 21:this._registerListeners();case 22:case"end":return t.stop()}}),t,this,[[7,13]])})));return function(){return t.apply(this,arguments)}}(),o.updateUI=function(){var t=a(s().mark((function t(){var e,n,i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=globalThis.ponzi.currentPlayer,n=null,t.prev=2,t.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.RaiseColddown,e);case 5:n=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),p("Can not get raisecolddown component on entity");case 11:if(n){t.next=13;break}return t.abrupt("return");case 13:i=d.now()/1e3,r=Number(n.end),f("btn_raise:",i,r),r<i?(this.label.string="Capital Raise",this.button.interactable=!0):(this.label.node.active=!0,this.button.interactable=!1,this.leftTime=r-i,this.startTime=Number(n.start),this.endTime=Number(n.end),this.startCountDownAnimation());case 17:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),o._registerListeners=function(){var t=this;m.instance.on(b.on_raisecolddown_update,(function(e){t.updateUI()}))},o.startCountDownAnimation=function(){var t=this,e=this.endTime-1;this.unschedule(this.minuesTimeLabel),this.schedule(this.minuesTimeLabel,1,e,0),clearTimeout(this.timer),p("Start a timer within",this.leftTime),this.timer=setTimeout((function(){t.updateUI(),t.unschedule(t.minuesTimeLabel)}),1e3*this.leftTime)},o.minuesTimeLabel=function(){var t=d.now()/1e3,e=this.endTime,n=this.startTime;this.label.string=w.calculateRemainingTimeOnlyMinutes(t,e,n,v.fakeBlockTime)},e}(h)).prototype,"label",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(x.prototype,"button",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=x))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/bytes_utils.ts",["cc"],(function(t){var r,n;return{setters:[function(t){r=t.cclegacy,n=t.log}],execute:function(){r._RF.push({},"1d0530WzXxL4qvSX/MEFrl0","bytes_utils",void 0);t("bytes_utils",function(){function t(){}return t.decodeTradeListItem=function(t){if(n("encodedBytes is ",t),!t)return null;var r=t.slice(2);if(!r)return null;var e=r.length;n(e);var i=64,s=0;r.substring(s,s+i);s+=i;var u=r.substring(s,s+i);s+=i;var o=r.substring(s,s+i);s+=i;var a=r.substring(s,s+i);s+=i;var c=r.substring(s,s+i);return{index:Number(this.hexToBinary(u)),isPresenter:1===Number(this.hexToBinary(o)),isSuccess:1===Number(this.hexToBinary(a)),partner:"0x"+c}},t.hexToBinary=function(t){for(var r=t.slice(2),n="",e=0;e<r.length;e++){var i=r[e],s=parseInt(i,16).toString(2);n+="0".repeat(4-s.length)+s}return n},t.byteArrayToHexString=function(t){return t.map((function(t){return t.toString(16).length%2==0?t.toString(16):"0"+t.toString(16)})).join("")},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ccc_msg.ts",["cc"],(function(_){var a;return{setters:[function(_){a=_.cclegacy}],execute:function(){a._RF.push({},"59d27HvRm5NarxwrmaHORg8","ccc_msg",void 0);var e=_("ccc_msg",(function(){}));e.on_player_add="on_player_add",e.on_player_update="on_player_update",e.on_game_update="on_game_update",e.on_gamestate_update="on_gamestate_update",e.on_gamemap_update="on_gamemap_update",e.on_gamemap_walkrecord_update="on_gamemap_walkrecord_update",e.on_mapitem_update="on_mapitem_update",e.on_isplayer_update="on_isplayer_update",e.on_iseliminated_update="on_isfinishgame_update",e.on_transactionlist_update="on_transactionlist_update",e.network_block_ui="network_block_ui",e.show_paydebt_button="show_paydebt_button",e.single_button_dialog="single_button_dialog",e.show_pick_asset="show_pick_asset",e.show_pick_fund="show_pick_fund",e.show_rules="show_rules",e.show_trade="show_trade",e.show_trade_ask="show_trade_ask",e.show_trade_input="show_trade_input",e.show_rank="show_rand",e.show_payconfirm="show_payconfirm",e.hideallpop="hideallpop",e.on_raisecolddown_update="on_raisecolddown_update",e.on_assetslist_update="on_assetslist_update",a._RF.pop()}}}));

System.register("chunks:///_virtual/changing_ellipses.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,l,s,r,a,o;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,l=i.assertThisInitialized},function(i){s=i.cclegacy,r=i._decorator,a=i.Label,o=i.Component}],execute:function(){var p,c,u,h,f;s._RF.push({},"9cb46RSpf1AAa6ibWoXrpH1","changing_ellipses",void 0);var b=r.ccclass,g=r.property;i("changing_ellipses",(p=b("changing_ellipses"),c=g(a),p((f=t((h=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,n(t,"label",f,l(t)),t.ellipsisCount=0,t.timer=null,t}e(t,i);var s=t.prototype;return s.onEnable=function(){this.startEllipsisAnimation()},s.onDisable=function(){this.stopEllipsisAnimation()},s.updateLabel=function(i){this.label.string=i+".".repeat(this.ellipsisCount)},s.startEllipsisAnimation=function(){var i=this;this.timer=setInterval((function(){i.ellipsisCount=(i.ellipsisCount+1)%4,i.updateLabel(i.label.string.replace(/\.*$/,""))}),500)},s.stopEllipsisAnimation=function(){clearInterval(this.timer),this.timer=null},t}(o)).prototype,"label",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=h))||u));s._RF.pop()}}}));

System.register("chunks:///_virtual/component_state.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"38324j/AvxLkoz63j/B2dvp","component_state",void 0);var n=e("component_state",(function(){}));n.player_inlobby=1,n.player_ingame=2,n.game_waiting=1,n.game_ingame=2,t._RF.pop()}}}));

System.register("chunks:///_virtual/coor_utils.ts",["cc"],(function(f){var o;return{setters:[function(f){o=f.cclegacy}],execute:function(){o._RF.push({},"bff6aGdFNBMKpL9ymzamZne","coor_utils",void 0);f("coor_utils",function(){function f(){}return f.getNeighboringHexes=function(f,o){for(var r=f%2==0?[{rowOff:0,colOff:1},{rowOff:0,colOff:-1},{rowOff:1,colOff:-1},{rowOff:-1,colOff:-1},{rowOff:1,colOff:0},{rowOff:-1,colOff:0}]:[{rowOff:0,colOff:-1},{rowOff:0,colOff:1},{rowOff:1,colOff:0},{rowOff:-1,colOff:0},{rowOff:1,colOff:1},{rowOff:-1,colOff:1}],c=[],O=0;O<r.length;O++){var t=r[O],l=f+t.rowOff,n=o+t.colOff;c.push({row:l,col:n})}return c},f}());o._RF.pop()}}}));

System.register("chunks:///_virtual/counter-label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts"],(function(n){var o,t,e,i,c,l,r;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.Label,c=n.log,l=n.Component},function(n){r=n.ponzi_controller}],execute:function(){var u;t._RF.push({},"c8007sglyBNMIgtqDRM0y2U","counter-label",void 0);var s=e.ccclass;e.property,n("counter_label",s("counter_label")(u=function(n){function t(){for(var o,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(o=n.call.apply(n,[this].concat(e))||this).inited=!1,o}o(t,n);var e=t.prototype;return e.start=function(){},e.init=function(){var n;if(null!=(n=globalThis.ponzi)&&n.counter){this.inited=!0,this.node.getComponent(i).string="New count is:"+globalThis.ponzi.counter.value;var o=this;r.instance.on("ccc_counter_value",(function(n){o.node.getComponent(i).string="New count is:"+n}))}else c("counter is not prepared!")},e.update=function(n){this.inited||this.init()},e.onBtnAddClicked=function(){console.log("onBtnAddClicked clicked!"),null==window.increment||window.increment()},e.onBtnAddRoomClicked=function(){console.log("onBtnAddRoomClicked clicked!"),null==window.createRoom||window.createRoom()},t}(l))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/data_center.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,t,o,r;return{setters:[function(e){a=e.createClass},function(e){t=e.cclegacy,o=e.warn,r=e.sys}],execute:function(){t._RF.push({},"fe2486vschNp7nd3k0xklcP","data_center",void 0),e("data_center",function(){function e(){this._mapRecordKey="map_record_key_",this._lastRecordGameIdKey="_lastRecordGameId"}var t=e.prototype;return t.data_center=function(){},t.saveMapWalkRecord=function(e){var a=globalThis.ponzi.game;if(a){r.localStorage.setItem(this._lastRecordGameIdKey,a.gameId);var t=JSON.stringify(e);r.localStorage.setItem(this._mapRecordKey+a.gameId,t)}else o("No gameobj when saving map record")},t.loadMapWalkRecord=function(){var e=globalThis.ponzi.game;if(!e)return o("No gameobj when loading map record"),null;var a=r.localStorage.getItem(this._mapRecordKey+e.gameId);if(a)return JSON.parse(a);var t=[];return this.saveMapWalkRecord(t),t},t.deleteMapWalkRecord=function(){console.log("deleteMapWalkRecord enter function");var e=globalThis.ponzi.game;if(!e)return o("No gameobj when loading map record"),null;console.log("Delete map walk record ",this._mapRecordKey+e.gameId),r.localStorage.removeItem(this._mapRecordKey+e.gameId)},t.getLastRecordGameId=function(){return r.localStorage.getItem(this._lastRecordGameIdKey)},a(e,null,[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/fake.ts",["./rollupPluginModLoBabelHelpers.js","cc","./account.ts","./string_utils.ts"],(function(n){var t,i,e,o,r,c,a,s,u,l,d,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,c=n._decorator,a=n.Node,s=n.Vec3,u=n.tween,l=n.Component},function(n){d=n.account},function(n){f=n.string_utils}],execute:function(){var h,w,p,W,v;r._RF.push({},"dfe33WqxXdOKZJZWnNWQDYW","fake",void 0);var y=c.ccclass,_=c.property;n("fake",(h=y("fake"),w=_({type:a}),h((v=t((W=function(n){function t(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=n.call.apply(n,[this].concat(r))||this,e(t,"fakeWindowParent",v,o(t)),t._currentWindow=null,t}i(t,n);var r=t.prototype;return r.start=function(){},r.update=function(n){},r.hideAllWidnows=function(){this.fakeWindowParent.children.forEach((function(n){n.active=!1}))},r.onCloseClicked=function(){this.hideWindow()},r.showFakeWindow=function(n,t){this.node.active=!0;var i=n.worldPosition,e=this.fakeWindowParent.children;e.forEach((function(n){n.active=!1}));var o=e[t];if(o.worldPosition=new s(i.x+30,i.y-40,0),e.forEach((function(n){n.active=n===o})),this.showWindow(o),0==t){var r=o.getComponent(d),c=globalThis.ponzi.currentPlayer;r.init(f.truncateString(c))}return o},r.showWindow=function(n){this._currentWindow=n,this._currentWindow.scale=new s(.96,.96,1),u(this._currentWindow).to(.02,{scale:s.ONE}).start()},r.hideWindow=function(){var n=this;this._currentWindow.scale=new s(1,1,1),u(this._currentWindow).to(.02,{scale:new s(.94,.94,1)}).call((function(){n.node.active=!1})).start()},t}(l)).prototype,"fakeWindowParent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=W))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/FakeMessageCenter.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var s,a;t._RF.push({},"8c811sdB9lJhrQ4jI2GzBIO","FakeMessageCenter",void 0);var r=n.ccclass;n.property,e("FakeMessageCenter",r("FakeMessageCenter")(((a=function(){function e(){this.Broardcast=void 0,this.game=void 0,this.gameMap=void 0}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.FakeMessageCenter=function(){},e}()).instance=null,s=a))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/flowui_manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./component_state.ts"],(function(e){var n,t,r,i,a,o,s,c,u,l,p,g,h,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Node,l=e.sys,p=e.Component},function(e){g=e.ponzi_controller},function(e){h=e.ccc_msg},function(e){m=e.component_state}],execute:function(){var f,y,v,d,w;s._RF.push({},"5a362V7oylN9rSmYknytXuj","flowui_manager",void 0);var _=c.ccclass,b=c.property;e("flowui_manager",(f=_("flowui_manager"),y=b({type:u}),f((w=n((d=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"gameFinishWindow",w,i(n)),n.gameState=-1,n.isPlayer=!1,n}t(n,e);var s=n.prototype;return s.start=function(){this.registerListeners()},s.update=function(e){var n=globalThis.ponzi.game;n&&(l.now()/1e3>=Number(n.endTime)&&this.gameState==m.game_ingame&&this.isPlayer?this.gameFinishWindow.active||(this.gameFinishWindow.active=!0,g.instance.sendCCCMsg(h.hideallpop,!0)):this.gameFinishWindow.active=!1)},s.registerListeners=function(){var e=a(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,g.instance.on(h.on_gamestate_update,(function(e){e.oldObj;var t=e.newObj;n.gameState=t})),g.instance.on(h.on_isplayer_update,(function(e){var t=e.entity,r=e.newObj;null!=r&&(t==globalThis.ponzi.currentPlayer&&(n.isPlayer=r.value))})),this.gameState=globalThis.ponzi.gameState,e.next=6,this.getIsPlayer();case 6:this.isPlayer=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.getIsPlayer=function(){var e=a(o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=globalThis.ponzi.currentPlayer,t=!1,e.prev=2,e.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.IsPlayer,n);case 5:r=e.sent,t=r.value,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),n}(p)).prototype,"gameFinishWindow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=d))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/fond_card.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,n,l,r,o,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,o=e.Label,c=e.Node,s=e.Component}],execute:function(){var u,p,b,d,y,f,h,g,m,v,R,z,_,k,w;l._RF.push({},"a39ac4RE2RKH5ziPVHx+KK9","fond_card",void 0);var T=r.ccclass,F=r.property;e("fond_card",(u=T("foud_card"),p=F({type:o}),b=F({type:o}),d=F({type:o}),y=F({type:o}),f=F({type:c}),h=F({type:c}),u((v=t((m=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,a(t,"labelFund",v,n(t)),a(t,"labelTime",R,n(t)),a(t,"labelRepay",z,n(t)),a(t,"labelRate",_,n(t)),a(t,"chosenTag",k,n(t)),a(t,"mask",w,n(t)),t.canPick=void 0,t.cardId=void 0,t}i(t,e);var l=t.prototype;return l.start=function(){},l.update=function(e){},l.init=function(e,t,i,a){this.setChosen(!1),this.labelFund.string=e.toString(),this.labelTime.string=t+" MIN",this.labelRepay.string="$"+e*(i/100),this.labelRate.string=(i/100).toFixed(2).toString(),this.canPick=a,this.mask.active=!this.canPick},l.setChosen=function(e){this.chosenTag.active=e},t}(s)).prototype,"labelFund",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(m.prototype,"labelTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(m.prototype,"labelRepay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(m.prototype,"labelRate",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(m.prototype,"chosenTag",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(m.prototype,"mask",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/fundpool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o,i,a,l,u,d,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,u=e.Node,d=e.log,c=e.Component}],execute:function(){var s,p,f,h,v,y,g;a._RF.push({},"738562U3INPhZMfP7dhbLu6","fundpool",void 0);var w=l.ccclass,P=l.property;e("fundpool",(s=w("fundpool"),p=P({type:u}),f=P({type:u}),s((y=r((v=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,n(r,"cardsParent",y,o(r)),n(r,"cardModel",g,o(r)),r._inited=void 0,r.cards=[[1,10,2,30],[2,20,2,31],[3,30,2,32],[4,40,2,33],[5,50,2,34],[6,60,2,35],[7,110,3,40],[8,120,3,41],[9,130,3,42],[10,140,3,43],[11,150,3,44],[12,160,3,45],[13,210,4,50],[14,220,4,51],[15,230,4,52],[16,240,4,53],[17,250,4,54],[18,260,4,55]],r}t(r,e);var a=r.prototype;return a.start=function(){},a.update=function(e){!this._inited&&null!=window.getFundPool&&window.getFundPool()&&(this._inited=!0,this.init())},a.init=function(){var e,r=null==window.getFundPool?void 0:window.getFundPool();for(var t in r)for(var n,o=r[t],a=i(o);!(n=a()).done;){var l=n.value,u=l[0],c=l[1];if(console.log(t,u,c),"array"==t){e=c;break}}d("get arrayBytes:",e),this.updateAllCards(e)},a.updateAllCards=function(e){this.cardsParent.removeAllChildren(),e.sort((function(e,r){return e-r}));for(var r=0;r<e.length;r++){var t=e[r],n=this.cards[t-1];this.createFundCard(n)}},a.createFundCard=function(e){},r}(c)).prototype,"cardsParent",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=r(v.prototype,"cardModel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=v))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/game_countdown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./time_utils.ts","./ponzi_config.ts","./component_state.ts","./ponzi-controller.ts","./ccc_msg.ts"],(function(t){var e,n,i,o,a,s,c,r,u,l,p,_,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,c=t.Label,r=t.sys,u=t.Component},function(t){l=t.time_utils},function(t){p=t.ponzi_config},function(t){_=t.component_state},function(t){g=t.ponzi_controller},function(t){m=t.ccc_msg}],execute:function(){var f,d,h,b,y;a._RF.push({},"6a488WYpMlOrbSBAAWn+CO1","game_countdown",void 0);var v=s.ccclass,z=s.property;t("game_countdown",(f=v("game_countdown"),d=z({type:c}),f((y=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"label",y,o(e)),e._inited=!1,e}n(e,t);var a=e.prototype;return a.start=function(){},a.update=function(t){this._inited||this.init()},a.init=function(){globalThis.ponzi.game&&(this._inited=!0,this._updateUI(),this._registerListeners())},a._registerListeners=function(){var t=this;g.instance.on(m.on_gamestate_update,(function(e){t._updateUI()}))},a._updateUI=function(){globalThis.ponzi.gameState==_.game_ingame&&(this.unschedule(this._updateLabel),this.schedule(this._updateLabel))},a._updateLabel=function(){var t=globalThis.ponzi.game;if(t){var e=Number(t.startTime),n=Number(t.endTime),i=r.now()/1e3,o=l.calculateRemainingTime(i,n,e,p.fakeBlockTime);this.label.string=o}},e}(u)).prototype,"label",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=b))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/game_ui_controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./fake.ts","./paytime.ts","./string_utils.ts"],(function(n){var e,t,r,i,o,c,s,a,u,l,d,p,f,w,k,g;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,i=n.assertThisInitialized,o=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){s=n.cclegacy,a=n._decorator,u=n.sys,l=n.warn,d=n.Component},function(n){p=n.ponzi_controller},function(n){f=n.ccc_msg},function(n){w=n.fake},function(n){k=n.paytime},function(n){g=n.string_utils}],execute:function(){var C,h,_,v,b;s._RF.push({},"c12da80TohPu6Sg2EzMf/Fw","game_ui_controller",void 0);var m=a.ccclass,M=a.property;n("game_ui_controller",(C=m("game_ui_controller"),h=M({type:w}),C((b=e((v=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return e=n.call.apply(n,[this].concat(o))||this,r(e,"fakeMgr",b,i(e)),e}t(e,n);var s=e.prototype;return s.start=function(){this.fakeMgr.node.active=!1},s.update=function(n){},s.onRuleClicked=function(){u.openURL("https://www.notion.so/mirrorworldfun/Trade-or-Bust-Rules-953378b93b8f4d73b586d44e678bd9d8")},s.onPickCoinClicked=function(){var n=o(c().mark((function n(){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p.instance.sendCCCMsg(f.network_block_ui,!0),n.prev=1,n.next=4,null==window.checkDebt?void 0:window.checkDebt();case 4:return n.next=6,null==window.pickCoin?void 0:window.pickCoin();case 6:p.instance.sendCCCMsg(f.single_button_dialog,{content:"You gain some money!",btnText:"OK"}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),e=g.getSecondLine(n.t0.toString()),p.instance.sendCCCMsg(f.single_button_dialog,{content:e,btnText:"OK"});case 13:return n.prev=13,p.instance.sendCCCMsg(f.network_block_ui,!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}(),s.onSearchPartnerClicked=function(){var n=o(c().mark((function n(){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("onSearchPartnerClicked clicked"),p.instance.sendCCCMsg(f.network_block_ui,!0),n.prev=2,n.next=5,null==window.checkDebt?void 0:window.checkDebt();case 5:return n.next=7,null==window.searchPartner?void 0:window.searchPartner();case 7:n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),e=g.getSecondLine(n.t0.toString()),p.instance.sendCCCMsg(f.single_button_dialog,{content:e,btnText:"OK"});case 13:return n.prev=13,p.instance.sendCCCMsg(f.network_block_ui,!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[2,9,13,16]])})));return function(){return n.apply(this,arguments)}}(),s.onPayDebtClicked=function(){var n=o(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("onPayDebtClicked clicked"),p.instance.sendCCCMsg(f.show_payconfirm,!0);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),s.onCovertTradeClicked=function(){var n=o(c().mark((function n(){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p.instance.sendCCCMsg(f.network_block_ui,!0),n.prev=1,n.next=4,null==window.checkDebt?void 0:window.checkDebt();case 4:p.instance.sendCCCMsg(f.show_trade,!0),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),e=g.getSecondLine(n.t0.toString()),p.instance.sendCCCMsg(f.single_button_dialog,{content:e,btnText:"OK"});case 11:return n.prev=11,p.instance.sendCCCMsg(f.network_block_ui,!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})));return function(){return n.apply(this,arguments)}}(),s.onGameFinishClicked=function(){var n=o(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p.instance.sendCCCMsg(f.network_block_ui,!0),n.prev=1,n.next=4,null==window.finishGame?void 0:window.finishGame();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),p.instance.sendCCCMsg(f.single_button_dialog,{content:"The end game encountered a problem.",btnText:"OK"});case 9:return n.prev=9,p.instance.sendCCCMsg(f.network_block_ui,!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(){return n.apply(this,arguments)}}(),s.onTitleIconsClicked=function(n){var e=n.target,t=e.name;if("account"==t)this.fakeMgr.showFakeWindow(e,0);else if("partners"==t)this.fakeMgr.showFakeWindow(e,4);else if("repay"==t)this.fakeMgr.showFakeWindow(e,3);else if("fund"==t)this.fakeMgr.showFakeWindow(e,2);else if("assets"==t){this.fakeMgr.showFakeWindow(e,1).getComponent(k).show()}else l("Unknown title button name:",t)},e}(d)).prototype,"fakeMgr",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=v))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"60250BBLnlPmIeHEjeK6uam","GameData",void 0);t("GameData",(function(){this.gameId=void 0,this.startTime=void 0,this.endTime=void 0,this.finishTime=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/gamefinish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ccc_msg.ts","./ponzi-controller.ts"],(function(n){var e,t,r,i,o,c,s,a;return{setters:[function(n){e=n.inheritsLoose,t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n._decorator,c=n.Component},function(n){s=n.ccc_msg},function(n){a=n.ponzi_controller}],execute:function(){var u;i._RF.push({},"68d07Z/joxPE4kM1jlaCbPX","gamefinish",void 0);var l=o.ccclass;o.property,n("gamefinish",l("gamefinish")(u=function(n){function i(){return n.apply(this,arguments)||this}e(i,n);var o=i.prototype;return o.start=function(){},o.update=function(n){},o.onBtnFinishClicked=function(){var n=t(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.instance.sendCCCMsg(s.network_block_ui,!0),n.prev=1,n.next=4,null==window.finishGame?void 0:window.finishGame();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),a.instance.sendCCCMsg(s.single_button_dialog,{content:"The end game encountered a problem.",btnText:"OK"});case 9:return n.prev=9,a.instance.sendCCCMsg(s.network_block_ui,!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(){return n.apply(this,arguments)}}(),i}(c))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/HexMapTile.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"e387c/xNDNOuKwNp+PrfiY+","HexMapTile",void 0);i("HexMapTile",(function(){this.x=void 0,this.y=void 0,this.emoji=void 0,this.row=void 0,this.col=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/item_asset.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,o,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,l=e.Component}],execute:function(){var c,u,p,f,y;a._RF.push({},"adce7lj+XBP05NuRPKO3PVd","item_asset",void 0);var d=o.ccclass,_=o.property;e("item_asset",(c=d("item_asset"),u=_({type:s}),c((y=t((f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"label",y,n(t)),t}r(t,e);var a=t.prototype;return a.start=function(){},a.update=function(e){},t}(l)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/JsCaller.ts",["cc"],(function(n){var t,e;return{setters:[function(n){t=n.cclegacy,e=n._decorator}],execute:function(){var c,r;t._RF.push({},"da8c9cEXPBCPbvJSCuGyRd8","JsCaller",void 0);var s=e.ccclass;e.property,n("JsCaller",s("JsCaller")(((r=function(){function n(){}return n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.prototype.JsCaller=function(){},n}()).instance=null,c=r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/list_utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"e3e13ubvmhH06LuQi5BMWln","list_utils",void 0);t("list_utils",function(){function t(){}return t.getExtraStrings=function(t,r){if(!t)return r;for(var n,u=new Set(t),i=[],s=e(r);!(n=s()).done;){var o=n.value;u.has(o)||i.push(o)}return i},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/lobby-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./component_state.ts","./ponzi-controller.ts","./ccc_msg.ts","./string_utils.ts"],(function(t){var e,n,a,i,r,o,s,c,l,u,m,h,b,p,g,d,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Label,u=t.Node,m=t.sys,h=t.Component,b=t.log,p=t.warn},function(t){g=t.component_state},function(t){d=t.ponzi_controller},function(t){f=t.ccc_msg},function(t){v=t.string_utils}],execute:function(){var y,w,k,T,L,G,N,x,P,R,_,C,S,I,z,B,J,M,A,D,j;s._RF.push({},"9aed4LIkbtB8b7eNgSv/Q/O","lobby-controller",void 0);var W=c.ccclass,F=c.property,H=function(t){return t[t.default=0]="default",t[t.prepare=1]="prepare",t[t.gaming=2]="gaming",t[t.calculating=3]="calculating",t[t.longTimeNoPlay=4]="longTimeNoPlay",t}(H||{});t("lobby_controller",(y=W("lobby_controller"),w=F({type:l}),k=F({type:l}),T=F({type:u}),L=F({type:u}),G=F({type:u}),N=F({type:u}),x=F({type:l}),P=F({type:u}),R=F({type:u}),y((S=e((C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"countDownLabel",S,i(e)),a(e,"contentLabel",I,i(e)),a(e,"btnJoinGame",z,i(e)),a(e,"btnTriggerGame",B,i(e)),a(e,"btnLastRank",J,i(e)),a(e,"btnRestart",M,i(e)),a(e,"welcomeLabel",A,i(e)),a(e,"lobbyNode",D,i(e)),a(e,"gameNode",j,i(e)),e.IsPlayerButGameNotStart="The Round Has Not Started Yet, Please wait",e.NotPlayerButGameIsStart="Game is started, just waiting for entering game!",e.IsPlayerButFinishGame="You are already eliminated, please wait for next game.",e.IsPlayerGameReachTimeButNotStart='The Game Has Already Started, Please Click "Play" To Begin.',e.NotPlayerAndGameNotReachTime="Game is not start, just join us!",e.GameCalculating='Game is calculating, click "Last Rank" to check your last rank(If you have one). The next game will be start soon...',e.LongTimeNoPlay="Join game and play.",e.IsPlayerButLongTimeNoPlay='The last game is over,please click "Restart" start a new game.',e.welcomeInited=!1,e.inited=!1,e.timer=null,e._oldTimeState=H.default,e.leftTime=void 0,e}n(e,t);var s=e.prototype;return s.start=function(){},s.update=function(){var t=r(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited){t.next=3;break}return t.next=3,this.initLobby();case 3:if(this.welcomeInited){t.next=6;break}return t.next=6,this.initWelcome();case 6:this.updateTimeState();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.onBtnRestartClicked=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b("onBtnRestartClicked"),d.instance.sendCCCMsg(f.network_block_ui,!0),t.prev=2,t.next=5,null==window.restartGame?void 0:window.restartGame();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),d.instance.sendCCCMsg(f.single_button_dialog,{content:"The end game encountered a problem.",btnText:"OK"});case 10:return t.prev=10,d.instance.sendCCCMsg(f.network_block_ui,!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[2,7,10,13]])})));return function(){return t.apply(this,arguments)}}(),s.onBtnLastRankClicked=function(){var t=r(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b("onBtnLastRankClicked1"),t.next=3,this.getIsEliminated();case 3:e=t.sent,b("onBtnLastRankClicked2",e),d.instance.calResultOnClient(e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onRulesClicked=function(){d.instance.sendCCCMsg(f.show_rules,!0)},s.onJoinGameClicked=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.instance.sendCCCMsg(f.network_block_ui,!0),t.next=3,null==window.joinGame?void 0:window.joinGame();case 3:d.instance.sendCCCMsg(f.network_block_ui,!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.onTriggerGameClicked=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerGame();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.initWelcome=function(){var t=r(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=globalThis.ponzi.currentPlayer){t.next=3;break}return t.abrupt("return");case 3:this.welcomeInited=!0,n=v.getHashFromSymbol(e),this.welcomeLabel.string="Welcome, "+v.sliceLastN(n,8)+"!";case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.initLobby=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:globalThis.ponzi.game&&(globalThis.ponzi.gameState,this.inited=!0,this.updateLobby(),this.registerListeners());case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.triggerGame=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.instance.sendCCCMsg(f.network_block_ui,!0),t.next=3,null==window.askStart?void 0:window.askStart();case 3:d.instance.sendCCCMsg(f.network_block_ui,!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.startCountdownAnimator=function(){var t=r(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this,this.startCountDownAnimation(e),clearTimeout(this.timer),b("start timer:",1e3*e),this.timer=setTimeout(r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.updateLobby();case 1:case"end":return t.stop()}}),t)}))),1e3*e);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.updateTimeState=function(){var t=H.default,e=globalThis.ponzi.game;if(e){var n=m.now();n=Number(n)/1e3;var a=Number(e.startTime),i=Number(e.endTime),r=Number(e.finishTime);n<a?t=H.prepare:n>=a&&n<i?t=H.gaming:n>=i&&n<r?t=H.calculating:n>=r?t=H.longTimeNoPlay:console.error("Unknown time state"),this._oldTimeState!=t&&(this._oldTimeState=t,this.updateLobby())}},s.updateLobby=function(){var t=r(o().mark((function t(){var e,n,a,i,r,s,c,l,u,h,d,f,v,y;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=globalThis.ponzi.gameState,n=globalThis.ponzi.game){t.next=5;break}return p("No game obj when update lobby"),t.abrupt("return");case 5:return a=!1,i=!1,t.prev=7,t.next=10,this.getIsPlayer();case 10:return a=t.sent,t.next=13,this.getIsEliminated();case 13:i=t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(7),console.error(t.t0);case 19:r=m.now(),r=Number(r)/1e3,s=Number(n.startTime),c=Number(n.endTime),l=Number(n.finishTime),u=Math.floor(s-r),h=H.default,r<s?h=H.prepare:r>=s&&r<c?h=H.gaming:r>=c&&r<l?h=H.calculating:r>=l?h=H.longTimeNoPlay:console.error("Unknown time state"),e==g.game_ingame?a&&!i?(b("ingame+isPlayer"),this.showGameNode(),h==H.gaming||h==H.prepare?(this.btnJoinGame.active=!1,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!1):h==H.calculating||h==H.longTimeNoPlay?(this.contentLabel.string=this.IsPlayerButLongTimeNoPlay,this.btnJoinGame.active=!1,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!0):console.error("未知的时间段")):a&&i?(this.showLobbyNode(),b("ingame+isPlayer+IsEliminated"),this.contentLabel.string=this.IsPlayerButFinishGame,this.btnJoinGame.active=!1,this.btnTriggerGame.active=!1,this.btnLastRank.active=!0,this.btnRestart.active=!1):(this.showLobbyNode(),b("ingame+notPlayer"),this.contentLabel.string=this.NotPlayerButGameIsStart,this.btnJoinGame.active=!0,this.btnTriggerGame.active=!1,this.btnLastRank.active=!0,this.btnRestart.active=!1):e==g.game_waiting&&(this.showLobbyNode(),a?(this.contentLabel.string="Game is started, just enter game!",this.btnJoinGame.active=!1,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!1,d=m.now(),d=Number(d)/1e3,f=Number(n.startTime),(v=Math.floor(f-d))>0?(b("gameWaiting+isPlayer+notStart"),this.contentLabel.string=this.IsPlayerButGameNotStart,this.startCountdownAnimator(v)):(b("gameWaiting+isPlayer+isStarted",h),h==H.prepare?console.error("不可能"):h==H.gaming?(this.contentLabel.string=this.IsPlayerGameReachTimeButNotStart,this.btnJoinGame.active=!1,this.btnTriggerGame.active=!0,this.btnRestart.active=!1):h==H.calculating||h==H.longTimeNoPlay?(this.contentLabel.string=this.IsPlayerGameReachTimeButNotStart,this.btnJoinGame.active=!1,this.btnTriggerGame.active=!1,this.btnRestart.active=!0):console.error("未知的状态"))):(b("gameWaiting+notPlayer,timeState:"+h),h==H.prepare?(u>0&&this.startCountdownAnimator(u),this.contentLabel.string=this.NotPlayerAndGameNotReachTime,this.btnJoinGame.active=!0,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!1):h==H.gaming?(this.contentLabel.string=this.NotPlayerButGameIsStart,this.btnJoinGame.active=!0,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!1):h==H.calculating?(this.contentLabel.string=this.GameCalculating,this.btnJoinGame.active=!1,this.btnTriggerGame.active=!1,this.btnLastRank.active=!0,this.btnRestart.active=!1,y=l-r,this.startCountdownAnimator(y)):h==H.longTimeNoPlay?(this.contentLabel.string=this.LongTimeNoPlay,this.btnJoinGame.active=!0,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!1):(console.error("未捕获的时间段"),this.contentLabel.string=this.LongTimeNoPlay,this.btnJoinGame.active=!0,this.btnTriggerGame.active=!1,this.btnLastRank.active=!1,this.btnRestart.active=!1)));case 28:case"end":return t.stop()}}),t,this,[[7,16]])})));return function(){return t.apply(this,arguments)}}(),s.getIsEliminated=function(){var t=r(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=globalThis.ponzi.currentPlayer,n=!1,t.prev=2,t.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.IsEliminated,e);case 5:n=t.sent,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),s.getIsPlayer=function(){var t=r(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=globalThis.ponzi.currentPlayer,n=!1,t.prev=2,t.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.IsPlayer,e);case 5:n=t.sent,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),s.registerListeners=function(){var t=this;d.instance.on(f.on_game_update,r(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateLobby();case 1:case"end":return e.stop()}}),e)})))),d.instance.on(f.on_gamestate_update,r(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateLobby();case 1:case"end":return e.stop()}}),e)})))),d.instance.on(f.on_isplayer_update,r(o().mark((function e(n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.entity,n.newValue,i=globalThis.ponzi.currentPlayer,v.getHashFromSymbol(i)==a&&t.updateLobby();case 5:case"end":return e.stop()}}),e)})))),d.instance.on(f.on_iseliminated_update,r(o().mark((function e(n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.entity,i=n.newObj,console.error("on_iseliminated_update1 ",n),globalThis.ponzi.currentPlayer!=a){e.next=12;break}return e.next=7,t.updateLobby();case 7:if(!i){e.next=12;break}if(console.error("on_iseliminated_update2 ",i.value),!i.value){e.next=12;break}return e.next=12,d.instance.calResultOnClientWhenBankrupt();case 12:case"end":return e.stop()}}),e)}))))},s.showGameNode=function(){this.lobbyNode.active=!1,this.gameNode.active=!0},s.showLobbyNode=function(){this.lobbyNode.active=!0,this.gameNode.active=!1},s.startCountDownAnimation=function(t){this.leftTime=t,this.countDownLabel.string=this.leftTime.toString();var e=t-1;this.unschedule(this.minuesTimeLabel),this.schedule(this.minuesTimeLabel,1,e,0)},s.minuesTimeLabel=function(){this.leftTime--,this.countDownLabel.string=this.formatSeconds(this.leftTime)},s.formatSeconds=function(t){var e="",n=Math.floor(t/86400);n>0&&(e+=n+" Day ");var a=Math.floor(t%86400/3600);a>0&&(e+=a+" Hour ");var i=Math.floor(t%3600/60);i>0&&(e+=i+" Minute ");var r=Math.floor(t%60);return r>0&&(e+=r+" Second "),e},e}(h)).prototype,"countDownLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(C.prototype,"contentLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(C.prototype,"btnJoinGame",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(C.prototype,"btnTriggerGame",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(C.prototype,"btnLastRank",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(C.prototype,"btnRestart",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(C.prototype,"welcomeLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(C.prototype,"lobbyNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(C.prototype,"gameNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=C))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/lobby-playerlist-model.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,l,i,n,o,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,a=e.Label,c=e.Component}],execute:function(){var s,p,u,y,b;n._RF.push({},"fc8b6iSYANJari6mOXx6nYG","lobby-playerlist-model",void 0);var f=o.ccclass,m=o.property;e("lobby_playerlist_model",(s=f("lobby_playerlist_model"),p=m({type:a}),s((b=t((y=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,l(t,"labelName",b,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.init=function(e){this.labelName.string=e},t}(c)).prototype,"labelName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=y))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/lobby-playerlist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./lobby-playerlist-model.ts","./ponzi-controller.ts","./ccc_msg.ts","./string_utils.ts","./component_state.ts"],(function(e){var t,i,n,r,o,l,a,s,c,y,p,b,u,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,s=e.Node,c=e.Label,y=e.log,p=e.Component},null,function(e){b=e.ponzi_controller},function(e){u=e.ccc_msg},function(e){d=e.string_utils},function(e){g=e.component_state}],execute:function(){var f,h,_,m,v,P,w,L,z;l._RF.push({},"9ada3n5kAFHOqFUXwLqrjjF","lobby-playerlist",void 0);var F=a.ccclass,N=a.property;e("lobby_playerlist",(f=F("lobby_playerlist"),h=N({type:s}),_=N({type:s}),m=N({type:c}),f((w=t((P=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"model",w,r(t)),n(t,"gridParent",L,r(t)),n(t,"peopleLabel",z,r(t)),t.lobbyPlayers=void 0,t.inited=!1,t}i(t,e);var l=t.prototype;return l.start=function(){},l.update=function(e){this.inited||this.init()},l.init=function(){var e=this,t=null==window.getPlayers?void 0:window.getPlayers();if(t){for(var i in y("lobby-playerlist start init..."),this.inited=!0,this.lobbyPlayers=[],t)for(var n,r=t[i],l=o(r);!(n=l()).done;){var a=n.value,s=a[0],c=(a[1],d.getHashFromSymbol(s));d.addStringToArray(this.lobbyPlayers,c)}this.peopleLabel.string=this.lobbyPlayers.length+" Players Login...",this.lobbyPlayers.forEach((function(t){e.addNewNode(t)})),this.registerListeners()}},l.registerListeners=function(){var e=this,t=this;b.instance.on(u.on_player_add,(function(e){d.addStringToArray(t.lobbyPlayers,e),t.peopleLabel.string=t.lobbyPlayers.length+" Players Login...",t.addNewNode(e)})),b.instance.on(u.on_gamestate_update,(function(t){var i=t.oldObj,n=t.newObj,r=i!=n,o=n==g.game_waiting;r&&o&&(e.inited=!1)}))},l.addNewNode=function(e){},t}(p)).prototype,"model",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(P.prototype,"gridParent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(P.prototype,"peopleLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=P))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Singleton.ts","./lobby-controller.ts","./counter-label.ts","./ccc_msg.ts","./component_state.ts","./ponzi_config.ts","./GameData.ts","./JsCaller.ts","./MUDListener.ts","./PlayerData.ts","./data_center.ts","./ponzi-controller.ts","./ponzi-model.ts","./FakeMessageCenter.ts","./test.ts","./TradeListItem.ts","./bytes_utils.ts","./coor_utils.ts","./list_utils.ts","./object_utils.ts","./rule_utils.ts","./string_utils.ts","./time_utils.ts","./HexMapTile.ts","./RoleLocalObj.ts","./RowCol.ts","./UnsolicitedTransactionObj.ts","./temp_data.ts","./fake.ts","./flowui_manager.ts","./fundpool.ts","./game_ui_controller.ts","./gamefinish.ts","./lobby-playerlist-model.ts","./lobby-playerlist.ts","./map-controller.ts","./mapblock.ts","./pick-money-card.ts","./player-model.ts","./account.ts","./assets.ts","./pay_debt.ts","./paytime.ts","./paytime_item.ts","./pick_asset.ts","./rank.ts","./single-button-pop.ts","./trade-ask.ts","./trade_input_price.ts","./popupui_manager.ts","./trade.ts","./button_raisingcapital.ts","./changing_ellipses.ts","./fond_card.ts","./game_countdown.ts","./item_asset.ts","./mapitem.ts","./pick_asset_item.ts","./popeffect.ts","./popup_node.ts","./right-player-list-item.ts","./right-player-list.ts","./rules.ts","./title-money.ts","./toggle.ts","./trade-asset-item.ts","./trade_parter_item.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/map-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./mapblock.ts","./string_utils.ts","./component_state.ts","./player-model.ts","./RoleLocalObj.ts","./ponzi_config.ts","./data_center.ts","./RowCol.ts","./coor_utils.ts","./mapitem.ts","./object_utils.ts"],(function(e){var r,t,n,a,o,i,l,s,u,c,p,m,d,f,v,g,h,w,y,b,M,_,P,x,z,C,k,N;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,i=e.extends,l=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,p=e.Node,m=e.log,d=e.instantiate,f=e.Vec3,v=e.Component},function(e){g=e.ponzi_controller},function(e){h=e.ccc_msg},function(e){w=e.mapblock},function(e){y=e.string_utils},function(e){b=e.component_state},function(e){M=e.player_model},function(e){_=e.RoleLocalObj},function(e){P=e.ponzi_config},function(e){x=e.data_center},function(e){z=e.RowCol},function(e){C=e.coor_utils},function(e){k=e.mapitem},function(e){N=e.object_utils}],execute:function(){var T,H,A,R,I,j,O,S,W,L,V,F,B,D,q;u._RF.push({},"f3250iGpAVPmqBmTcrOIPDJ","map-controller",void 0);var E=c.ccclass,G=c.property,J=(e("map_controller",(T=E("map_controller"),H=G({type:p}),A=G({type:p}),R=G({type:p}),I=G({type:p}),j=G({type:p}),O=G({type:p}),T((L=r((W=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o))||this,n(r,"mapParent",L,a(r)),n(r,"itemParent",V,a(r)),n(r,"playerParent",F,a(r)),n(r,"mapBlockModel",B,a(r)),n(r,"mapItemModel",D,a(r)),n(r,"playerModel",q,a(r)),r.partners=void 0,r.inited=!1,r.tmpCoorArray=void 0,r}t(r,e);var u=r.prototype;return u.start=function(){this.mapBlockModel.active=!1,this.mapItemModel.active=!1,this.playerModel.active=!1},u.update=function(e){this.inited||this.init()},u.init=function(){var e;globalThis.ponzi.gameState==b.game_ingame&&((null==(e=globalThis.ponzi.gameMap)?void 0:e.mapArray)&&(null==window.getMapItems?void 0:window.getMapItems())&&(this.tmpCoorArray=null,this.inited=!0,this.updateMap(),this.drawItem(),this.drawPlayers(),this.registerListeners()))},u.registerListeners=function(){var e=this;g.instance.on(h.on_transactionlist_update,(function(r){var t=r.entity,n=r.newObj;globalThis.ponzi.currentPlayer==t&&(n?(console.error("new transaction partner list:",n.list),e.partners=n.list,e.drawPlayers()):e.partners=null)})),g.instance.on(h.on_gamemap_update,(function(r){var t,n;if(r){var a=r.mapArray,o=Number(null==(t=globalThis.ponzi.gameMap)?void 0:t.width),i=Number(null==(n=globalThis.ponzi.gameMap)?void 0:n.height);e.drawMap(o,i,a)}})),g.instance.on(h.on_gamemap_walkrecord_update,(function(){e.updateMap()})),g.instance.on(h.on_mapitem_update,(function(){e.drawItem()})),g.instance.on(h.on_player_update,(function(r){e.drawPlayers();var t=r.entity,n=r.oldObj,a=r.newObj;if(a&&n){var o=N.compareObjects(n,a);(o.x||o.y)&&(e.updateMapWalkRecord(t,Number(a.x),Number(a.y)),g.instance.sendCCCMsg(h.on_gamemap_walkrecord_update,null),g.instance.sendCCCMsg(h.on_mapitem_update,null))}})),g.instance.on(h.on_player_add,(function(r){e.drawPlayers()})),g.instance.on(h.on_gamestate_update,(function(r){var t=r.oldObj,n=r.newObj,a=t!=n,o=n==b.game_waiting;a&&o&&(e.inited=!1)}))},u.updateMapWalkRecord=function(e,r,t){var n=this;if(e==globalThis.ponzi.currentPlayer){var a=x.instance.loadMapWalkRecord();this.giveValue(a,r,t),C.getNeighboringHexes(r,t).forEach((function(e){n.giveValue(a,e.row,e.col)})),x.instance.saveMapWalkRecord(a)}},u.updateMap=function(){var e,r,t,n=Number(null==(e=globalThis.ponzi.gameMap)?void 0:e.width),a=Number(null==(r=globalThis.ponzi.gameMap)?void 0:r.height),o=null==(t=globalThis.ponzi.gameMap)?void 0:t.mapArray;o?this.drawMap(n,a,o):m("No map data!!!!!!")},u.drawPlayers=function(){var e=l(s().mark((function e(){var r,t,n,a,i,l,u,c,p,v,g,h,w,b,P,x,z,C,k,N,T;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null==window.getPlayers?void 0:window.getPlayers()){e.next=3;break}return e.abrupt("return");case 3:for(n in t={},r)for(a=r[n],i=o(a);!(l=i()).done;)u=l.value,c=u[0],p=u[1],v=y.getHashFromSymbol(c),t[v]||(t[v]=new _),(g=t[v]).entity=c,"x"==n?(h=Number(p),g.row=h):"y"==n?(w=Number(p),g.col=w):"money"==n&&(b=Number(p),g.money=b);if(m("drawPlayers role array:",t),(P=this).playerParent.removeAllChildren(),this.partners){e.next=12;break}return e.next=11,this.getPartners();case 11:this.partners=e.sent;case 12:for(x in t)z=t[x],(C=d(P.playerModel)).setParent(P.playerParent),C.active=!0,k=P.tmpCoorArray[z.row][z.col],C.position=new f(k.x,k.y,0),N=C.getComponent(M),T=this.isPartner(z.entity),N.init(x,T);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.isPartner=function(e){return!!this.partners&&this.partners.indexOf(y.getHashFromSymbol(e))>-1},u.getPartners=function(){var e=l(s().mark((function e(){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=globalThis.ponzi.currentPlayer,t=null,e.prev=2,e.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.TransactionList,r);case 5:t=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",null);case 12:return e.abrupt("return",t.list);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),u.drawItem=function(){var e=null==window.getMapItems?void 0:window.getMapItems();if(e){var r=[];for(var t in e)for(var n,a=e[t],i=o(a);!(n=i()).done;){var l=n.value,s=l[0],u=l[1],c=y.getNumberFromSymbol(s)-1,p=y.getNumberFromSymbol(u);r[c]||(r[c]=new J);var m=r[c];r[c]=m,"x"==t?m.row=p:"y"==t&&(m.col=p)}var v=x.instance.loadMapWalkRecord(),g=this;g.itemParent.removeAllChildren(),r.forEach((function(e){var r=d(g.mapItemModel);r.setParent(g.itemParent),r.active=!0;var t=g.tmpCoorArray[e.row][e.col];r.position=new f(t.x,t.y,0),r.getComponent(k).init(v[e.row]&&1==v[e.row][e.col])}))}},u.drawMap=function(e,r,t){var n=this;if(t){var a=e/2,i=r/2,l=this.generateHexMap(110,100),s=this.moveAllTiles(l,a,i);this.tmpCoorArray=s;var u=this.generateHexCoorMap(),c=new _,p=null==window.getPlayers?void 0:window.getPlayers();for(var v in p)for(var g,h=p[v],b=o(h);!(g=b()).done;){var M=g.value,z=M[0],k=M[1];if(y.getHashFromSymbol(z)==globalThis.ponzi.currentPlayer)if("x"==v){var N=Number(k);c.row=N}else if("y"==v){var T=Number(k);c.col=T}}var H=x.instance.loadMapWalkRecord();console.warn("Role walk record save:",c),this.giveValue(H,c.row,c.col),C.getNeighboringHexes(c.row,c.col).forEach((function(e){n.giveValue(H,e.row,e.col)})),x.instance.saveMapWalkRecord(H);var A=[];c&&(A=C.getNeighboringHexes(c.row,c.col)),this.mapParent.removeAllChildren();for(var R=0;R<s.length;R++)for(var I=0;I<s[R].length;I++){var j=s[R][I],O=u[R][I],S=d(this.mapBlockModel);S.setParent(this.mapParent),S.active=!0,S.position=new f(j.x,j.y,0);var W=S.getComponent(w);W.init(O,H[R]&&1==H[R][I]);var L=this.isSurround(A,R,I);L&&m("isSurround:",L),W.setSurround(L),P.showCoor&&W.showLabel(O.row+","+O.col)}}else m("No map data to draw!")},u.isSurround=function(e,r,t){if(!e)return!1;for(var n=0;n<e.length;n++){var a=e[n];if(a.row==r&&a.col==t)return!0}return!1},u.generateHexCoorMap=function(){for(var e=[],r=0;r<P.mapWH;r++){for(var t=[],n=0;n<P.mapWH;n++){var a=new z;a.row=r,a.col=n,t.push(a)}e.push(t)}return e},u.generateHexMap=function(e,r){for(var t=[],n=0;n<P.mapWH;n++){for(var a=[],o=n%2==0?0:e/2,i=0;i<P.mapWH;i++){var l=e*i+o,s=r*n;a.push({x:l,y:s,emoji:"▲"})}t.push(a)}return t},u.moveAllTiles=function(e,r,t){var n=e[t][r],a=r-Math.floor(e.length/2),o=t-Math.floor(e[0].length/2);return e.map((function(e){return e.map((function(e){return i({},e,{x:e.x-n.x+a,y:e.y-n.y+o})}))}))},u.giveValue=function(e,r,t){e[r]||(e[r]=[]),e[r][t]=1},r}(v)).prototype,"mapParent",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=r(W.prototype,"itemParent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=r(W.prototype,"playerParent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=r(W.prototype,"mapBlockModel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=r(W.prototype,"mapItemModel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=r(W.prototype,"playerModel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=W))||S)),function(){this.row=void 0,this.col=void 0});u._RF.pop()}}}));

System.register("chunks:///_virtual/mapblock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./data_center.ts","./coor_utils.ts","./string_utils.ts"],(function(e){var t,n,i,o,a,r,l,c,s,u,p,d,g,m,b,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,s=e.Label,u=e.Node,p=e.Component,d=e.log},function(e){g=e.ponzi_controller},function(e){m=e.ccc_msg},function(e){b=e.data_center},function(e){f=e.coor_utils},function(e){h=e.string_utils}],execute:function(){var v,w,k,_,y,C,T,I,z,M,R;l._RF.push({},"f922dKK6jNJnb8lD64YYLm6","mapblock",void 0);var x=c.ccclass,L=c.property;e("mapblock",(v=x("mapblock"),w=L({type:s}),k=L({type:u}),_=L({type:u}),y=L({type:u}),v((I=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"label",I,o(t)),i(t,"walkedImage",z,o(t)),i(t,"newImage",M,o(t)),i(t,"surroundImage",R,o(t)),t.mapTile=void 0,t}n(t,e);var l=t.prototype;return l.start=function(){},l.update=function(e){},l.init=function(e,t){this.mapTile=e,this.label.node.active=!1,this.walkedImage.active=t,this.newImage.active=!t},l.setSurround=function(e){this.surroundImage.active=e},l.showLabel=function(e){this.label.string=e,this.label.node.active=!0},l.onBlockClicked=function(){var e=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,d("click block:",this.mapTile.row,this.mapTile.col),g.instance.sendCCCMsg(m.network_block_ui,!0),e.prev=3,e.next=6,null==window.move?void 0:window.move(t.mapTile.row,t.mapTile.col);case 6:t.updateMapWalkRecord(this.mapTile.row,this.mapTile.col),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),n=h.getSecondLine(e.t0.toString()),g.instance.sendCCCMsg(m.single_button_dialog,{content:n,btnText:"OK"});case 14:g.instance.sendCCCMsg(m.network_block_ui,!1);case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),l.updateMapWalkRecord=function(e,t){var n=this,i=b.instance.loadMapWalkRecord();this.giveValue(i,e,t),f.getNeighboringHexes(e,t).forEach((function(e){n.giveValue(i,e.row,e.col)})),b.instance.saveMapWalkRecord(i)},l.giveValue=function(e,t,n){e[t]||(e[t]=[]),e[t][n]=1},t}(p)).prototype,"label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(T.prototype,"walkedImage",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(T.prototype,"newImage",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(T.prototype,"surroundImage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=T))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/mapitem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,a,r,l,c,p,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,c=t.tween,p=t.v2,s=t.Component}],execute:function(){var u,d,y,f,h,m,g;a._RF.push({},"49b4aAjQItOMplhuIvp5DQa","mapitem",void 0);var v=r.ccclass,b=r.property;t("mapitem",(u=v("mapitem"),d=b({type:l}),y=b({type:l}),u((m=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"lightNode",m,n(e)),o(e,"darkNode",g,n(e)),e}i(e,t);var a=e.prototype;return a.start=function(){},a.update=function(t){},a.init=function(t){this.lightNode.active=t,this.darkNode.active=!t},a.coinJumpAndFly=function(t,e,i){var o=t.position;c(t).sequence(c().by(.5,{position:p(0,100),angle:180}),c().to(1,{position:e,angle:360}),c().to(.5,{scale:.5}),c().to(.5,{opacity:0}).call((function(){t.position=o,t.scale=1,t.angle=0,t.opacity=255})),c.call(i)).start()},e}(s)).prototype,"lightNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(h.prototype,"darkNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/MUDListener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var s;n._RF.push({},"d39a68r4wVEMKcXMZ0+aGDs","MUDListener",void 0);var i=r.ccclass;r.property,t("MUDListener",i("MUDListener")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},r.startListen=function(){},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/object_utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"35821YoN2VMO7iAVcpIzcMJ","object_utils",void 0);t("object_utils",function(){function t(){}return t.isNull=function(t){return null==t},t.compareObjects=function(t,n){var r={};if(t||!n){for(var c in t)n.hasOwnProperty(c)&&t[c]===n[c]||(r[c]=n[c]);for(var e in n)t.hasOwnProperty(e)||(r[e]=n[e]);return r}for(var u in n)r[u]=n[u]},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/pay_debt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ccc_msg.ts","./ponzi-controller.ts"],(function(n){var e,t,r,o,i,c,a,s,u,l,p,d;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,o=n.assertThisInitialized,i=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){a=n.cclegacy,s=n._decorator,u=n.Label,l=n.Component},function(n){p=n.ccc_msg},function(n){d=n.ponzi_controller}],execute:function(){var f,b,y,w,C;a._RF.push({},"8349bBJWm5K/oQcTFidjiwW","pay_debt",void 0);var _=s.ccclass,g=s.property;n("pay_debt",(f=_("pay_debt"),b=g({type:u}),f((C=e((w=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return e=n.call.apply(n,[this].concat(i))||this,r(e,"labelCount",C,o(e)),e}t(e,n);var a=e.prototype;return a.start=function(){},a.update=function(n){},a.init=function(){var n=i(c().mark((function n(){var e,t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=globalThis.ponzi.currentPlayer,n.next=3,null==window.queryValue?void 0:window.queryValue(window.env.components.Debt,e);case 3:t=n.sent,this.labelCount.string="$"+t.value.toString();case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.onBtnConfirmClicked=function(){var n=i(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("onPayDebtClicked clicked"),d.instance.sendCCCMsg(p.network_block_ui,!0),n.prev=2,n.next=5,null==window.payDebt?void 0:window.payDebt();case 5:d.instance.sendCCCMsg(p.show_paydebt_button,!1),d.instance.sendCCCMsg(p.show_payconfirm,!1),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),d.instance.sendCCCMsg(p.single_button_dialog,{content:"Unknown error.",btnText:"OK"});case 12:return n.prev=12,d.instance.sendCCCMsg(p.network_block_ui,!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),e}(l)).prototype,"labelCount",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=w))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/paytime_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi_config.ts","./time_utils.ts"],(function(e){var i,t,n,a,s,l,r,o,u,m,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,l=e._decorator,r=e.Label,o=e.sys,u=e.Component},function(e){m=e.ponzi_config},function(e){c=e.time_utils}],execute:function(){var h,p,f,b,T,y,d;s._RF.push({},"a3baeJzuIVC2JuGB3jWgxXD","paytime_item",void 0);var g=l.ccclass,v=l.property;e("paytime_item",(h=g("paytime_item"),p=v({type:r}),f=v({type:r}),h((y=i((T=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return i=e.call.apply(e,[this].concat(s))||this,n(i,"labelCount",y,a(i)),n(i,"labelTime",d,a(i)),i.startTime=void 0,i.endTime=void 0,i.aaa=void 0,i}t(i,e);var s=i.prototype;return s.init=function(e,i,t,n){var a=this;this.startTime=Number(n),this.endTime=this.startTime+60*Number(t);var s=o.now()/1e3,l=this.endTime-s;if(this.labelCount.string=i.toString(),l>0){var r=l-1;this.aaa=this.minuesTimeLabel,this.unschedule(this.aaa),this.minuesTimeLabel(),this.schedule(this.aaa,1,r,0),this.scheduleOnce((function(){a.labelTime.string="out of time"}),l)}else a.labelTime.string="out of time"},s.start=function(){},s.update=function(e){},s.minuesTimeLabel=function(){var e=o.now()/1e3,i=this.endTime,t=this.startTime;i<=e?(this.unschedule(this.aaa),this.labelTime.string="out of time"):this.labelTime.string=c.calculateRemainingTimeOnlyMinutes(e,i,t,m.fakeBlockTime)},i}(u)).prototype,"labelCount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=i(T.prototype,"labelTime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=T))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/paytime.ts",["./rollupPluginModLoBabelHelpers.js","cc","./paytime_item.ts"],(function(e){var t,i,n,r,a,o,c,l,s,u,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,l=e._decorator,s=e.Node,u=e.instantiate,p=e.Component},function(e){m=e.paytime_item}],execute:function(){var h,y,b,v,f,d,g,w,N,C,P,z,D;c._RF.push({},"7c707Gd27RBPblwFDlYHZXz","paytime",void 0);var k=l.ccclass,x=l.property;e("paytime",(h=k("paytime"),y=x({type:s}),b=x({type:s}),v=x({type:s}),f=x({type:s}),d=x({type:s}),h((N=t((w=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"itemParent",N,r(t)),n(t,"itemModel",C,r(t)),n(t,"waitingNotice",P,r(t)),n(t,"noDebtNotice",z,r(t)),n(t,"normalContent",D,r(t)),t}i(t,e);var c=t.prototype;return c.start=function(){},c.update=function(e){},c.show=function(){var e=a(o().mark((function e(){var t,i,n,r,a,c,l,s,u,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.itemParent.removeAllChildren(),this.waitingNotice.active=!0,this.itemParent.active=!1,this.noDebtNotice.active=!1,this.normalContent.active=!1,e.prev=5,t=globalThis.ponzi.currentPlayer,e.next=9,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.OwnedCards,t);case 9:i=e.sent,n=[],r=0;case 12:if(!(r<i.array.length)){e.next=22;break}if(0!=Number(i.array[r])){e.next=15;break}return e.abrupt("break",22);case 15:for(a=i.array.slice(r,r+5),c=[],l=0;l<5;l++)s=a[l],c.push(Number(s));n.push(c),r+=5,e.next=12;break;case 22:for(console.log("convered card infos is:",n),u=0;u<n.length;u++)p=n[u],this.createItem(p[0],p[1]*p[3]/100,p[2],p[4]);this.waitingNotice.active=!1,0==n.length?(this.noDebtNotice.active=!0,this.normalContent.active=!1):(this.normalContent.active=!0,this.itemParent.active=!0,this.noDebtNotice.active=!1),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(5),console.error("query OwnedCards error!",e.t0);case 31:case"end":return e.stop()}}),e,this,[[5,28]])})));return function(){return e.apply(this,arguments)}}(),c.createItem=function(e,t,i,n){var r=u(this.itemModel);r.active=!0,r.parent=this.itemParent,r.getComponent(m).init(e,t,i,n)},t}(p)).prototype,"itemParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(w.prototype,"itemModel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(w.prototype,"waitingNotice",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(w.prototype,"noDebtNotice",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(w.prototype,"normalContent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=w))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/pick_asset_item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,c,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,a=e.Node,s=e.Component}],execute:function(){var p,u,l,d,f;o._RF.push({},"dd8667K5XBPVoBYaIzxRI5X","pick_asset_item",void 0);var h=c.ccclass,_=c.property;e("pick_asset_item",(p=h("pick_asset_item"),u=_({type:a}),p((f=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,i(t,"chosenBoarder",f,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},o.chosen=function(e){this.chosenBoarder.active=e},t}(s)).prototype,"chosenBoarder",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=d))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/pick_asset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./pick_asset_item.ts"],(function(e){var t,n,r,s,i,a,c,o,u,p,l,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,o=e._decorator,u=e.Node,p=e.Component},function(e){l=e.ponzi_controller},function(e){f=e.ccc_msg},function(e){h=e.pick_asset_item}],execute:function(){var d,b,k,v,g;c._RF.push({},"2f164Tql71PoIU0wqaCp2Nc","pick_asset",void 0);var y=o.ccclass,x=o.property;e("pick_asset",(d=y("pick_asset"),b=x({type:u}),d((g=t((v=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"itemParent",g,s(t)),t.pickAsset=0,t}n(t,e);var c=t.prototype;return c.start=function(){this.reset()},c.update=function(e){},c.reset=function(){this.pickAsset=0,this.itemParent.children.forEach((function(e){e.getComponent(h).chosen(!1)}))},c.onCloseClicked=function(){this.node.active=!1},c.onItemClicked=function(e){var t=e.target,n=this.itemParent.children,r=n.indexOf(t);n.forEach((function(e){e.getComponent(h).chosen(e===t)}));var s=r+1;this.pickAsset=s},c.onPickClicked=function(){var e=i(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.pickAsset){e.next=3;break}return l.instance.sendCCCMsg(f.single_button_dialog,{content:"Please choose an asset first!",btnText:"OK"}),e.abrupt("return");case 3:return e.next=5,this.checkAssetCount(this.pickAsset);case 5:if(!((t=e.sent)>=3)){e.next=9;break}return l.instance.sendCCCMsg(f.single_button_dialog,{content:"Each kind of asset can have only 3.",btnText:"OK"}),e.abrupt("return");case 9:this.node.active=!1,n=this.pickAsset,r=t+1,l.instance.sendCCCMsg(f.show_pick_fund,{assetId:n,assetExpectedCount:r});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.checkHasDebt=function(){var e=i(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=globalThis.ponzi.currentPlayer,e.next=4,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.HasDebt,t);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),c.checkAssetCount=function(){var e=i(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=globalThis.ponzi.currentPlayer,e.next=4,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.AssetsList,n);case 4:if(r=e.sent,1!=t){e.next=9;break}return e.abrupt("return",r.gpu);case 9:if(2!=t){e.next=13;break}return e.abrupt("return",r.bitcoin);case 13:if(3!=t){e.next=17;break}return e.abrupt("return",r.battery);case 17:if(4!=t){e.next=21;break}return e.abrupt("return",r.leiter);case 21:if(5!=t){e.next=25;break}return e.abrupt("return",r.gold);case 25:if(6!=t){e.next=29;break}return e.abrupt("return",r.oil);case 29:console.error("Unexpected asset index:",t);case 30:e.next=36;break;case 32:return e.prev=32,e.t0=e.catch(0),console.error("Can not find assetslist on entity"),e.abrupt("return",3);case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t){return e.apply(this,arguments)}}(),t}(p)).prototype,"itemParent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=v))||k));c._RF.pop()}}}));

System.register("chunks:///_virtual/pick-money-card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fond_card.ts","./ponzi-controller.ts","./ccc_msg.ts","./string_utils.ts"],(function(t){var e,n,r,i,a,o,c,s,d,l,u,p,f,h,g,v,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose,o=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){s=t.cclegacy,d=t._decorator,l=t.Node,u=t.log,p=t.instantiate,f=t.Component},function(t){h=t.fond_card},function(t){g=t.ponzi_controller},function(t){v=t.ccc_msg},function(t){C=t.string_utils}],execute:function(){var _,k,y,b,w,m,I;s._RF.push({},"4574bQ+J7JAPZCXsSAL518i","pick-money-card",void 0);var P=d.ccclass,M=d.property;t("pick_money_card",(_=P("pick_money_card"),k=M({type:l}),y=M({type:l}),_((m=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"cardParent",m,i(e)),r(e,"cardModel",I,i(e)),e.assetLevel=void 0,e.assetId=0,e.cardId=0,e.cards=[[1,10,2,30],[2,20,2,31],[3,30,2,32],[4,40,2,33],[5,50,2,34],[6,60,2,35],[7,110,3,40],[8,120,3,41],[9,130,3,42],[10,140,3,43],[11,150,3,44],[12,160,3,45],[13,210,4,50],[14,220,4,51],[15,230,4,52],[16,240,4,53],[17,250,4,54],[18,260,4,55]],e}n(e,t);var s=e.prototype;return s.start=function(){},s.update=function(t){},s.init=function(){var t,e=null==window.getFundPool?void 0:window.getFundPool();for(var n in e)for(var r,i=e[n],o=a(i);!(r=o()).done;){var c=r.value,s=c[0],d=c[1];if(console.log(n,s,d),"array"==n){t=d;break}}u("get arrayBytes:",t),this.updateAllCards(t)},s.updateAllCards=function(t){this.cardParent.removeAllChildren(),t.sort((function(t,e){return t-e}));for(var e=0;e<t.length;e++){var n=t[e],r=this.cards[n-1];this.createFundCard(r,Math.floor(e/3)+1==this.assetLevel)}},s.createFundCard=function(t,e){var n=p(this.cardModel);n.active=!0,n.parent=this.cardParent;var r=n.getComponent(h);r.init(t[1],t[2],t[3],e),r.cardId=t[0]},s.onItemClicked=function(t){var e=t.target.parent,n=e.getComponent(h);n.canPick?(this.cardId=n.cardId,u("click card id:",this.cardId),this.cardParent.children.forEach((function(t){t.getComponent(h).setChosen(t==e)}))):g.instance.sendCCCMsg(v.single_button_dialog,{content:"Can not choose this card.",btnText:"OK"})},s.onButtonClicked=function(){var t=o(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=this.assetId){t.next=3;break}return g.instance.sendCCCMsg(v.single_button_dialog,{content:"Please choose an asset first!",btnText:"OK"}),t.abrupt("return");case 3:return g.instance.sendCCCMsg(v.network_block_ui,!0),t.prev=4,t.next=7,null==window.pickAsset?void 0:window.pickAsset(this.assetId);case 7:return t.next=9,null==window.pickFund?void 0:window.pickFund(this.cardId);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),e=C.getSecondLine(t.t0.toString()),g.instance.sendCCCMsg(v.single_button_dialog,{content:e,btnText:"OK"});case 15:return t.prev=15,g.instance.sendCCCMsg(v.network_block_ui,!1),this.node.active=!1,t.finish(15);case 19:case"end":return t.stop()}}),t,this,[[4,11,15,19]])})));return function(){return t.apply(this,arguments)}}(),e}(f)).prototype,"cardParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(w.prototype,"cardModel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=w))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/player-model.ts",["./rollupPluginModLoBabelHelpers.js","cc","./string_utils.ts"],(function(e){var t,i,r,a,n,l,s,o,p,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,s=e.Label,o=e.Node,p=e.Component},function(e){c=e.string_utils}],execute:function(){var u,y,h,b,g,f,d,m,v,_,z;n._RF.push({},"42f64jpdAxK2I6YwOKiWMXX","player-model",void 0);var w=l.ccclass,I=l.property;e("player_model",(u=w("player_model"),y=I({type:s}),h=I({type:o}),b=I({type:o}),g=I({type:o}),u((m=t((d=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"labelId",m,a(t)),r(t,"sprite",v,a(t)),r(t,"spriteEnemy",_,a(t)),r(t,"partnerTag",z,a(t)),t.playerHash=void 0,t}i(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.init=function(e,t){this.playerHash=e;var i=globalThis.ponzi.currentPlayer;e==c.getHashFromSymbol(i)?(this.sprite.active=!0,this.spriteEnemy.active=!1,this.labelId.string="",this.partnerTag.active=!1):(this.sprite.active=!1,this.spriteEnemy.active=!0,this.partnerTag.active=t,this.labelId.string=c.sliceLastN(this.playerHash,4))},n.registerLiseners=function(){},t}(p)).prototype,"labelId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(d.prototype,"sprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(d.prototype,"spriteEnemy",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(d.prototype,"partnerTag",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"93c079OZHxMV4reU3/L5lUf","PlayerData",void 0);t("PlayerData",(function(){this.gameId=void 0,this.state=void 0,this.money=void 0,this.assets=void 0,this.transactions=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ponzi_config.ts",["cc"],(function(n){var o;return{setters:[function(n){o=n.cclegacy}],execute:function(){o._RF.push({},"946baLZbaNKJJ9Vxuu7bT87","ponzi_config",void 0);var c=n("ponzi_config",(function(){}));c.fakeBlockTime=5,c.mapWH=20,c.showCoor=!1,o._RF.pop()}}}));

System.register("chunks:///_virtual/ponzi-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ccc_msg.ts","./object_utils.ts","./list_utils.ts","./bytes_utils.ts","./string_utils.ts","./component_state.ts","./data_center.ts","./rule_utils.ts"],(function(e){var t,n,a,o,s,i,r,c,l,u,d,p,g,f,h,b,C,v,_,y;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,a=e.createClass,o=e.regeneratorRuntime,s=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,r=e._decorator,c=e.log,l=e.find,u=e.Component,d=e.error,p=e.warn},function(e){g=e.ccc_msg},function(e){f=e.object_utils},function(e){h=e.list_utils},function(e){b=e.bytes_utils},function(e){C=e.string_utils},function(e){v=e.component_state},function(e){_=e.data_center},function(e){y=e.rule_utils}],execute:function(){var m,w;i._RF.push({},"d27bewDLOVJ3aP597Cc0JT2","ponzi-controller",void 0);var k=function(){this.player=void 0,this.totalScore=void 0,this.gpu=void 0,this.bitcoin=void 0,this.battery=void 0,this.leiter=void 0,this.gold=void 0,this.oil=void 0},M=r.ccclass;r.property,e("ponzi_controller",M("ponzi_controller")(((w=function(e){function i(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).players=void 0,t.Game=void 0,t.GameMap=void 0,t}t(i,e);var r=i.prototype;return r.start=function(){this.players=[],this.init()},r.update=function(e){},r.on=function(e,t){this.node.on(e,t)},r.init=function(){globalThis.ponzi||(globalThis.ponzi={}),this.registerJsLiseners()},r.registerJsLiseners=function(){c("ccc registerJsLiseners");var e=this;globalThis.ponzi.gamestate_update=n(o().mark((function t(n,a){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.gameStateUpdate(n,a);case 2:case"end":return t.stop()}}),t)}))),globalThis.ponzi.game_update=function(t,n){e.gameUpdate(t,n)},globalThis.ponzi.counter_update=function(t,n){e.counterUpdate(t,n)},globalThis.ponzi.isplayer_update=function(t){e.onIsPlayerUpdate(t.entity,t.value[0])},globalThis.ponzi.transactionlist_update=function(t){e.transactionListUpdate(t)},globalThis.ponzi.assetslist_update=function(t){e.onAssetsListUpdate(t)},globalThis.ponzi.player_update=function(t){var n=t.value,a=n[0],o=n[1];e.onPlayerChanged(t.entity,o,a)},globalThis.ponzi.gamemap_update=function(t,n){e.onGameMapChanged(t,n)},globalThis.ponzi.mapitems_update=function(t,n){e.onMapItemsChanged(t,n)},globalThis.ponzi.raiseColddown_update=function(t){e.onRaiseColddownUpdate(t)},globalThis.ponzi.tradelist_update=function(t){e.onTradeListUpdate(t)},globalThis.ponzi.passivetransaction_update=function(t){e.onPassiveTransactionUpdate(t)},globalThis.ponzi.fundpool_update=function(t){e.onFundPoolUpdate(t)},globalThis.ponzi.hasdebt_update=function(t){e.onHasDebt(t)},globalThis.ponzi.iseliminated_update=function(t){e.onIsEliminatedUpdate(t.entity,t.value[0])}},r.sendCCCMsg=function(e,t){this.node.emit(e,t)},r.onHasDebt=function(e){var t=globalThis.ponzi.currentPlayer,n=e.value,a=n[0];n[1];console.log("onHasDebt",t,e.entity),e.entity==t&&(a?a.value?i.instance.sendCCCMsg(g.show_paydebt_button,!0):i.instance.sendCCCMsg(g.show_paydebt_button,!1):a||i.instance.sendCCCMsg(g.show_paydebt_button,!1))},r.onFundPoolUpdate=function(e){console.log("onFundPoolUpdate runs!");var t=e.value;t[0],t[1]},r.findMax=function(e){if(0===e.length)return"No data provided";var t=Math.max.apply(null,e);switch(e.indexOf(t)){case 0:return"GPU";case 1:return"Bitcoin";case 2:return"Battery";case 3:return"Leiter";case 4:return"Gold";case 5:return"Oil";default:return"Unknown"}},r.onPassiveTransactionUpdate=function(e){if(e.entity==globalThis.ponzi.currentPlayer){var t=e.value,n=t[0];t[1];if(n){var a=n,o=a.from,s=a.money,r=a.asset;i.instance.sendCCCMsg(g.show_trade_ask,{presenterName:o,offerMoney:s,assetNumber:r})}}},r.onTradeListUpdate=function(e){var t=globalThis.ponzi.currentPlayer;if(e.entity==t){var n=e.value,a=n[0];n[1];if(a){c("nextValue.list:",a.list);var o=b.decodeTradeListItem(a.list);if(o){var s="",r=o.isSuccess?"accept":"counter-buy";s=o.isPresenter?"Your trade partner "+C.sliceLastN(o.partner,6)+" "+r+" your trade. Please check your asset and money update.":"You "+r+" the trade offered by "+C.sliceLastN(o.partner,6)+". Please check your asset and money update.",i.instance.sendCCCMsg(g.single_button_dialog,{content:s,btnText:"OK"})}}else c("TradeList components reset")}},r.onRaiseColddownUpdate=function(e){this.sendCCCMsg(g.on_raisecolddown_update,e)},r.onMapItemsChanged=function(e,t){i.instance.sendCCCMsg(g.on_mapitem_update,{oldObj:e,newObj:t})},r.onGameMapChanged=function(e,t){var n=this.compareObjects(e,t);n?(c("on game map changed:",n),i.instance.sendCCCMsg(g.on_gamemap_update,n)):c("There is no changes on GameMap")},r.onIsPlayerUpdate=function(e,t){i.instance.sendCCCMsg(g.on_isplayer_update,{entity:e,newObj:t})},r.onIsEliminatedUpdate=function(){var e=n(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.instance.sendCCCMsg(g.on_iseliminated_update,{entity:t,newObj:n});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.onPlayerChanged=function(e,t,n){if(f.isNull(t)&&n)i.instance.sendCCCMsg(g.on_player_add,e);else if(f.isNull(t)||f.isNull(n))c("Player components reset");else{var a=this.compareObjects(t,n);(a.x||a.y||a.money)&&i.instance.sendCCCMsg(g.on_player_update,{entity:e,oldObj:t,newObj:n})}},r.onAssetsListUpdate=function(e){this.sendCCCMsg(g.on_assetslist_update,e)},r.transactionListUpdate=function(e){var t=e.entity,n=e.value,a=n[0],o=n[1];if(console.error("广播on_transactionlist_update",a),i.instance.sendCCCMsg(g.on_transactionlist_update,{entity:t,newObj:a}),a){if(t==globalThis.ponzi.currentPlayer){var s=h.getExtraStrings(null==o?void 0:o.list,a.list);s.length>0&&(c("transactionListUpdate extraStrings:",s),i.instance.sendCCCMsg(g.single_button_dialog,{content:"You've got a new trading partner",btnText:"OK"}))}}else c("TransactionList component clear")},r.counterUpdate=function(e,t){var n=this.compareObjects(e,t);if(n){var a=n.value;a&&this.sendCCCMsg("ccc_counter_value",a),console.log(n)}},r.gameInit=function(e){},r.gameUpdate=function(e,t){this.sendCCCMsg(g.on_game_update,{oldObj:e,newObj:t})},r.gameStateUpdate=function(){var e=n(o().mark((function e(t,n){var a,s,i,r,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendCCCMsg(g.on_gamestate_update,{oldObj:t,newObj:n}),a=t!=n,s=n==v.game_ingame,i=n==v.game_waiting,c("check delete walk record1:",a),c("check delete walk record2:",s),!a||!s){e.next=15;break}if(r=_.instance.getLastRecordGameId(),l=globalThis.ponzi.game){e.next=12;break}return p("No gameobj when loading map record"),e.abrupt("return",null);case 12:""!=r&&r&&r!=l.gameId&&(console.log("start delete walk record"),_.instance.deleteMapWalkRecord(),this.sendCCCMsg(g.on_gamemap_walkrecord_update,null)),e.next=28;break;case 15:if(!a||!i){e.next=28;break}return c("Game is over, calculate rank if not be eliminated."),e.prev=17,globalThis.ponzi.currentPlayer,e.next=21,this.getIsEliminated();case 21:e.sent||this.calResultOnClient(!1),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(17),d(e.t0);case 28:case"end":return e.stop()}}),e,this,[[17,25]])})));return function(t,n){return e.apply(this,arguments)}}(),r.getIsEliminated=function(){var e=n(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=globalThis.ponzi.currentPlayer,n=!1,e.prev=2,e.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.IsEliminated,t);case 5:n=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),r.calResultOnClient=function(){var e=n(o().mark((function e(t){var n,a,r,l,u,p,f,h,b,C,v,_,m,w,M,T,x,z,O,P,U;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("game is over, calculating result..."),i.instance.sendCCCMsg(g.network_block_ui,!0),e.prev=2,n=[],e.next=6,null==window.queryResultAssetsList?void 0:window.queryResultAssetsList();case 6:a=e.sent,console.error("entities:",a),r=s(a);case 9:if((l=r()).done){e.next=32;break}return u=l.value,e.next=13,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.AssetsList,u);case 13:p=e.sent,f=y.calculateScore(p.gpu),h=y.calculateScore(p.bitcoin),b=y.calculateScore(p.battery),C=y.calculateScore(p.leiter),v=y.calculateScore(p.gold),_=y.calculateScore(p.oil),(m=new k).gpu=p.gpu,m.bitcoin=p.bitcoin,m.battery=p.battery,m.leiter=p.leiter,m.gold=p.gold,m.oil=p.oil,m.player=u,m.totalScore=f+h+b+C+v+_,n.push(m);case 30:e.next=9;break;case 32:n=this.sortScores(n),w=globalThis.ponzi.currentPlayer,M=!1,T=0;case 36:if(!(T<n.length)){e.next=51;break}if(x=n[T],console.error("game is over, calculating result",x.player,w),x.player!=w){e.next=48;break}return z=[x.gpu,x.bitcoin,x.battery,x.leiter,x.gold,x.oil],O=this.findMax(z),P=t?0:T+1,!0,U=x.totalScore,i.instance.sendCCCMsg(g.show_rank,{show:true,rank:P,points:U,mostAsset:O}),M=!0,e.abrupt("break",51);case 48:T++,e.next=36;break;case 51:M||i.instance.sendCCCMsg(g.single_button_dialog,{content:"Can not find your rank in last game. Maybe it's been too long...",btnText:"OK"}),e.next=57;break;case 54:e.prev=54,e.t0=e.catch(2),d(e.t0);case 57:return e.prev=57,i.instance.sendCCCMsg(g.network_block_ui,!1),e.finish(57);case 60:case"end":return e.stop()}}),e,this,[[2,54,57,60]])})));return function(t){return e.apply(this,arguments)}}(),r.calResultOnClientWhenBankrupt=function(){var e=n(o().mark((function e(){var t,n,a,s,r,l,u,p,f,h,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("game is over, calResultOnClientWhenBankrupt result..."),i.instance.sendCCCMsg(g.network_block_ui,!0),e.prev=2,t=globalThis.ponzi.currentPlayer,e.next=6,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.AssetsList,t);case 6:n=e.sent,a=y.calculateScore(n.gpu),s=y.calculateScore(n.bitcoin),r=y.calculateScore(n.battery),l=y.calculateScore(n.leiter),u=y.calculateScore(n.gold),p=y.calculateScore(n.oil),f=[n.gpu,n.bitcoin,n.battery,n.leiter,n.gold,n.oil],h=this.findMax(f),0,!0,b=a+s+r+l+u+p,i.instance.sendCCCMsg(g.show_rank,{show:true,rank:0,points:b,mostAsset:h}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),d(e.t0);case 24:return e.prev=24,i.instance.sendCCCMsg(g.network_block_ui,!1),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[2,21,24,27]])})));return function(){return e.apply(this,arguments)}}(),r.sortScores=function(e){for(var t=e.length,n=0;n<t-1;n++)for(var a=0;a<t-n-1;a++)if(e[a].totalScore<e[a+1].totalScore){var o=e[a];e[a]=e[a+1],e[a+1]=o}return e},r.compareObjects=function(e,t){var n={};if(e||!t){for(var a in e)t.hasOwnProperty(a)&&e[a]===t[a]||(n[a]=t[a]);for(var o in t)e.hasOwnProperty(o)||(n[o]=t[o]);return n}for(var s in t)n[s]=t[s]},a(i,null,[{key:"instance",get:function(){return i._instance||(i._instance=l("ponzi-controller").getComponent(i)),i._instance}}]),i}(u))._instance=void 0,m=w))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/ponzi-model.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(n){var e,t,o,c,i;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){o=n.cclegacy,c=n._decorator},function(n){i=n.default}],execute:function(){var r,u;o._RF.push({},"badc4hFtvJJQpODfCwyJgyN","ponzi-model",void 0);var a=c.ccclass;c.property,n("default",a("PonziModel")(((u=function(n){function o(){for(var e,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return(e=n.call.apply(n,[this].concat(o))||this).counterValue=void 0,e}return e(o,n),o.prototype.PonziModel=function(){this.counterValue=0},t(o,null,[{key:"instance",get:function(){return o._instance||(o._instance=new o),o._instance}}]),o}(i()))._instance=void 0,r=u))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/popeffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,p,i,r,c,a,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,p=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,c=e.Node,a=e.Vec3,s=e.tween,u=e.Component}],execute:function(){var l,f,d,h,v;i._RF.push({},"43680oLRndBhqqOv6oYu4aY","popeffect",void 0);var y=r.ccclass,N=r.property;e("popeffect",(l=y("popeffect"),f=N({type:c}),l((v=t((h=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,n(t,"popupNode",v,p(t)),t}o(t,e);var i=t.prototype;return i.start=function(){},i.update=function(e){},i.show=function(){this.popupNode.scale=new a(.96,.96,1),s(this.popupNode).to(.02,{scale:a.ONE}).start()},i.hide=function(){var e=this;this.popupNode.scale=new a(1,1,1),s(this.popupNode).to(.02,{scale:new a(.94,.94,1)}).call((function(){e.node.active=!1})).start()},t}(u)).prototype,"popupNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=h))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/popup_node.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,t,p,r,n,i,c,a,u;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,p=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,c=e.tween,a=e.Vec3,u=e.Component}],execute:function(){var s,l,d,f,h;n._RF.push({},"fb949ZUGgFM7bURrJbG869J","popup_node",void 0);var y=i.ccclass,_=i.property;e("popup_node",(s=y("popup_node"),l=_({type:Node}),s((h=o((f=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return o=e.call.apply(e,[this].concat(n))||this,p(o,"popupNode",h,r(o)),o}t(o,e);var n=o.prototype;return n.start=function(){},n.show=function(){this.popupNode.setScale(.9),c(this.popupNode).to(.2,{scale:new a(1.1,1.1,1)}).to(.1,{scale:a.ONE}).start()},o}(u)).prototype,"popupNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/popupui_manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./single-button-pop.ts","./pick_asset.ts","./pick-money-card.ts","./rules.ts","./trade.ts","./trade-ask.ts","./trade_input_price.ts","./rank.ts","./popeffect.ts","./pay_debt.ts"],(function(e){var n,t,i,o,a,r,p,u,c,s,l,d,f,b,y,w,k,_,g,v,h,m,z;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){p=e.cclegacy,u=e._decorator,c=e.Node,s=e.log,l=e.Component},function(e){d=e.ponzi_controller},function(e){f=e.ccc_msg},function(e){b=e.single_button_pop},function(e){y=e.pick_asset},function(e){w=e.pick_money_card},function(e){k=e.rules},function(e){_=e.trade},function(e){g=e.trade_ask},function(e){v=e.trade_input_price},function(e){h=e.rank},function(e){m=e.popeffect},function(e){z=e.pay_debt}],execute:function(){var A,x,D,P,C,F,W,B,I,T,H,q,L,M,N,R,V,j,E,G,J,S,Y,K,O;p._RF.push({},"454a77xJxBFcYkhgV356qng","popupui_manager",void 0);var Q=u.ccclass,U=u.property;e("popupui_manager",(A=Q("popupui_manager"),x=U({type:c}),D=U({type:b}),P=U({type:y}),C=U({type:w}),F=U({type:k}),W=U({type:_}),B=U({type:g}),I=U({type:v}),T=U({type:h}),H=U({type:c}),q=U({type:z}),A((N=n((M=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"networkBlock",N,o(n)),i(n,"singleDialog",R,o(n)),i(n,"pickAsset",V,o(n)),i(n,"pickFund",j,o(n)),i(n,"rules",E,o(n)),i(n,"trade",G,o(n)),i(n,"tradeAsk",J,o(n)),i(n,"tradeInput",S,o(n)),i(n,"rank",Y,o(n)),i(n,"btnPayDebt",K,o(n)),i(n,"payConfim",O,o(n)),n}t(n,e);var p=n.prototype;return p.start=function(){var e=this;this.hideAllPop(),this.initPayButton(),d.instance.on(f.hideallpop,(function(n){s("hideallpop:",n),e.hideAllPop()})),d.instance.on(f.show_paydebt_button,(function(n){s("ui manager receive show_paydebt_button:",n),e.btnPayDebt.active=n})),d.instance.on(f.network_block_ui,(function(n){e.networkBlock.active=n})),d.instance.on(f.single_button_dialog,(function(n){var t=n.content,i=n.btnText;e.popupWindow(e.singleDialog.node),e.singleDialog.init(t,i)})),d.instance.on(f.show_pick_asset,(function(){e.popupWindow(e.pickAsset.node),e.pickAsset.reset()})),d.instance.on(f.show_pick_fund,(function(n){var t=n.assetId,i=n.assetExpectedCount;e.pickFund.assetLevel=i,e.pickFund.assetId=t,e.pickFund.init(),e.popupWindow(e.pickFund.node)})),d.instance.on(f.show_rules,(function(){e.popupWindow(e.rules.node)})),d.instance.on(f.show_trade,(function(){e.trade.show(),e.trade.reset()})),d.instance.on(f.show_trade_ask,(function(n){e.popupWindow(e.tradeAsk.node);var t=n.presenterName,i=n.offerMoney,o=n.assetNumber;e.tradeAsk.init(t,i,o)})),d.instance.on(f.show_trade_input,(function(){e.popupWindow(e.tradeInput.node)})),d.instance.on(f.show_rank,(function(n){var t=n.show,i=n.rank,o=n.points,a=n.mostAsset,r=n.interestPaied,p=n.borrowed,u=n.tradeTimes;t?(e.popupWindow(e.rank.node),e.rank.init(i,o,a,r,p,u)):e.rank.node.active=!1})),d.instance.on(f.show_payconfirm,a(r().mark((function n(t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return e.popupWindow(e.payConfim.node),n.next=4,e.payConfim.init();case 4:n.next=7;break;case 6:e.payConfim.node.active=!1;case 7:case"end":return n.stop()}}),n)}))))},p.hideAllPop=function(){var e=this;e.pickAsset.node.active=!1,e.pickFund.node.active=!1,e.rules.node.active=!1,e.trade.node.active=!1,e.tradeAsk.node.active=!1,e.tradeInput.node.active=!1,e.rank.node.active=!1,e.btnPayDebt.active=!1,e.payConfim.node.active=!1},p.popupWindow=function(e){e.active=!0;var n=e.getComponent(m);n&&n.show()},p.hidePopupWindow=function(e){},p.update=function(e){},p.initPayButton=function(){var e=a(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHasDebt();case 2:n=e.sent,t=!!n&&n.value,d.instance.sendCCCMsg(f.show_paydebt_button,t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),p.getHasDebt=function(){var e=a(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=globalThis.ponzi.currentPlayer,t=!1,e.prev=2,e.next=5,null==window.queryValue?void 0:window.queryValue(window.env.components.HasDebt,n);case 5:t=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),n}(l)).prototype,"networkBlock",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=n(M.prototype,"singleDialog",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=n(M.prototype,"pickAsset",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=n(M.prototype,"pickFund",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=n(M.prototype,"rules",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=n(M.prototype,"trade",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=n(M.prototype,"tradeAsk",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=n(M.prototype,"tradeInput",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=n(M.prototype,"rank",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=n(M.prototype,"btnPayDebt",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=n(M.prototype,"payConfim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=M))||L));p._RF.pop()}}}));

System.register("chunks:///_virtual/rank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts"],(function(e){var t,n,i,l,r,a,o,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,o=e.Label,s=e.Component},function(e){c=e.ponzi_controller},function(e){u=e.ccc_msg}],execute:function(){var b,p,d,g,T,f,y,E,h,C,A,R,m,I,N,O,k;r._RF.push({},"54d5aEhC05A5IR98CYYCn2I","rank",void 0);var w=a.ccclass,z=a.property;e("rank",(b=w("rank"),p=z({type:o}),d=z({type:o}),g=z({type:o}),T=z({type:o}),f=z({type:o}),y=z({type:o}),E=z({type:o}),b((A=t((C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"labelRank",A,l(t)),i(t,"labelPoints",R,l(t)),i(t,"labelNotice",m,l(t)),i(t,"labelMostAsset",I,l(t)),i(t,"labelInterestPaied",N,l(t)),i(t,"labelBorrowed",O,l(t)),i(t,"labelTradeTimes",k,l(t)),t}n(t,e);var r=t.prototype;return r.start=function(){},r.update=function(e){},r.init=function(e,t,n,i,l,r){this.labelMostAsset.string="Most Held Asset ------ "+(n||"Unknown"),this.labelInterestPaied.string="Total Interest Paid ------ "+(i||0),this.labelBorrowed.string="Total Borrowd ------ $"+(l||0),this.labelTradeTimes.string="Total Trades ------ "+(r||0),this.labelPoints.string=t.toString(),this.labelRank.string=e.toString(),this.labelNotice.string=this.getNoticeByRank(e).toString()},r.onShareClicked=function(){c.instance.sendCCCMsg(u.single_button_dialog,{content:"This feature is under development",btnText:"OK"})},r.onPlayerAgainClicked=function(){c.instance.sendCCCMsg(u.single_button_dialog,{content:"This feature is under development",btnText:"OK"})},r.onBtnCloseClicked=function(){this.node.active=!1},r.getNoticeByRank=function(e){return 1===e?"CONGRATS!! YOU ARE NOW THE MAN WHO BEAT THE MARKET!!":0==e?"YOU WERE ELIMINATED DUE TO DEFAULT, NOT EVERYONE'S TOO BIG TO FAIL":"CONGRATS ON SURVIVING THE BEAR! YOU WILL THRIVE IN THE NEXT CYCLE!"},t}(s)).prototype,"labelRank",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(C.prototype,"labelPoints",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(C.prototype,"labelNotice",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(C.prototype,"labelMostAsset",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(C.prototype,"labelInterestPaied",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(C.prototype,"labelBorrowed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(C.prototype,"labelTradeTimes",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=C))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/right-player-list-item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./rule_utils.ts","./string_utils.ts"],(function(e){var t,i,r,n,l,a,o,s,u,c,p,b,m,y,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,l=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,u=e.Label,c=e.Component,p=e.Color,b=e.log},function(e){m=e.ponzi_controller},function(e){y=e.ccc_msg},function(e){f=e.rule_utils},function(e){g=e.string_utils}],execute:function(){var h,_,d,w,v,I,z,P,x,S,k,L,E,N,A,C,D,R,T;o._RF.push({},"244b0/ZByZNJZ3APWmgrHO6","right-player-list-item",void 0);var U=s.ccclass,Z=s.property;e("right_player_list_item",(h=U("right_player_list_item"),_=Z({type:u}),d=Z({type:u}),w=Z({type:u}),v=Z({type:u}),I=Z({type:u}),z=Z({type:u}),P=Z({type:u}),x=Z({type:u}),h((L=t((k=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,r(t,"labelName",L,n(t)),r(t,"labelItem1",E,n(t)),r(t,"labelItem2",N,n(t)),r(t,"labelItem3",A,n(t)),r(t,"labelItem4",C,n(t)),r(t,"labelItem5",D,n(t)),r(t,"labelItem6",R,n(t)),r(t,"labelPoints",T,n(t)),t.itemPlayerEntity=void 0,t._inited=!1,t}i(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){this._inited||this._init()},o.init=function(e){this.itemPlayerEntity=e},o._init=function(){var e=l(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.itemPlayerEntity){e.next=3;break}return e.abrupt("return");case 3:this._inited=!0,i=globalThis.ponzi.currentPlayer,this.labelName.string=g.truncateString(t),this.labelName.color=i==t?new p(255,245,0,255):new p(255,255,255,255),this.updateUI(),this._registerListeners();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.updateUI=function(){var e=l(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,null==window.queryValue?void 0:window.queryValue(window.env.components.AssetsList,this.itemPlayerEntity);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),b("Can not find AssetsList on entity"),e.abrupt("return");case 11:this.labelItem1.string=t.gpu,this.labelItem2.string=t.bitcoin,this.labelItem3.string=t.battery,this.labelItem4.string=t.leiter,this.labelItem5.string=t.gold,this.labelItem6.string=t.oil,i=f.calculateScore(t.gpu)+f.calculateScore(t.bitcoin)+f.calculateScore(t.battery)+f.calculateScore(t.leiter)+f.calculateScore(t.gold)+f.calculateScore(t.oil),this.labelPoints.string=i.toString();case 19:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),o._registerListeners=function(){var e=this;m.instance.on(y.on_assetslist_update,l(a().mark((function t(i){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i.value)[0],r[1],e.itemPlayerEntity==i.entity){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.updateUI();case 5:case"end":return t.stop()}}),t)}))))},t}(c)).prototype,"labelName",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(k.prototype,"labelItem1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(k.prototype,"labelItem2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(k.prototype,"labelItem3",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(k.prototype,"labelItem4",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(k.prototype,"labelItem5",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(k.prototype,"labelItem6",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(k.prototype,"labelPoints",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=k))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/right-player-list.ts",["./rollupPluginModLoBabelHelpers.js","cc","./right-player-list-item.ts","./string_utils.ts","./ccc_msg.ts","./ponzi-controller.ts"],(function(t){var e,i,r,n,a,o,l,s,c,d,g,u,p,m,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,l=t._decorator,s=t.Node,c=t.error,d=t.log,g=t.instantiate,u=t.Component},function(t){p=t.right_player_list_item},function(t){m=t.string_utils},function(t){h=t.ccc_msg},function(t){f=t.ponzi_controller}],execute:function(){var v,_,y,I,b,P,w;o._RF.push({},"1641dmD3eZCmoTdvp1N2NUq","right-player-list",void 0);var z=l.ccclass,L=l.property;t("right_player_list",(v=z("right_player_list"),_=L({type:s}),y=L({type:s}),v((P=e((b=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"itemModel",P,n(e)),r(e,"itemParent",w,n(e)),e._inited=!1,e._gameId=null,e}i(e,t);var o=e.prototype;return o.start=function(){this.itemModel.active=!1},o.update=function(t){this._inited||this.init()},o.init=function(){var t=null==window.getAssetsList?void 0:window.getAssetsList();if(t){var e=[];for(var i in t)for(var r,n=t[i],o=a(n);!(r=o()).done;){var l=r.value,s=l[0],g=l[1];console.log(i,s,g);var u=m.getHashFromSymbol(s);-1===e.indexOf(u)&&e.push(u)}if(0!==e.length){c("right array:",e);var p=globalThis.ponzi.game;if(p){d("right-player-list inited",p.gameId),this._gameId=p.gameId,this._inited=!0;var h=this.itemParent.children;if(h){for(var f=0;f<h.length;f++)h[f].active=!1;this.itemParent.removeAllChildren()}for(var v in e){var _=e[v];this.addPlayerItem(_)}this.registerListeners()}}}},o.registerListeners=function(){var t=this;f.instance.on(h.on_player_add,(function(e){var i=m.getHashFromSymbol(e);t.addPlayerItem(i)})),f.instance.on(h.on_game_update,(function(e){e.oldObj;var i=e.newObj;t._gameId!=i.gameId&&(t._gameId=i.gameId,t._inited=!1)}))},o.addPlayerItem=function(t){var e=g(this.itemModel);e.setParent(this.itemParent),e.active=!0,e.getComponent(p).init(t)},e}(u)).prototype,"itemModel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(b.prototype,"itemParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=b))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/RoleLocalObj.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"14c670v7IFJSIz5aZf751FE","RoleLocalObj",void 0);t("RoleLocalObj",(function(){this.entity=void 0,this.gameId=void 0,this.state=void 0,this.money=void 0,this.row=void 0,this.col=void 0,this.assets=void 0,this.transactions=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/RowCol.ts",["cc"],(function(o){var t;return{setters:[function(o){t=o.cclegacy}],execute:function(){t._RF.push({},"637703VAvtEYaVriGd18T+w","RowCol",void 0);o("RowCol",(function(){this.row=void 0,this.col=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/rule_utils.ts",["cc"],(function(t){var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){u._RF.push({},"b9c5b9TA9FHL7VuIfigYW2z","rule_utils",void 0);t("rule_utils",function(){function t(){}return t.calculateSingleAssetScore=function(t){for(var u=0,e=0;e<t.length;e++)u+=e+1;return u},t.calculateScore=function(t){for(var u=0,e=1;e<=t;e++)u+=e;return u},t}());u._RF.pop()}}}));

System.register("chunks:///_virtual/rules.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component}],execute:function(){var u;n._RF.push({},"b2741IVokNLR4WeLxS/1+Dk","rules",void 0);var c=o.ccclass;o.property,t("rules",c("rules")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.update=function(t){},o.onCloseClicked=function(){this.node.active=!1},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/single-button-pop.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,l,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,c=t.Component}],execute:function(){var u,p,s,b,f,g,y;r._RF.push({},"c321aMqJepMl7TZuWl0gSUf","single-button-pop",void 0);var h=l.ccclass,L=l.property;t("single_button_pop",(u=h("single_button_pop"),p=L({type:a}),s=L({type:a}),u((g=e((f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"contentLabel",g,o(e)),i(e,"buttonLabel",y,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){},r.update=function(t){},r.init=function(t,e){this.contentLabel.string=t,this.buttonLabel.string=e},r.onBtnClicked=function(){this.node.active=!1},e}(c)).prototype,"contentLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(f.prototype,"buttonLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=f))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){n("default",(function(){var n=function(){function n(){}return t(n,null,[{key:"Inst",get:function(){return null===n._inst&&(n._inst=new this),n._inst}}]),n}();return n._inst=null,n})),e._RF.push({},"68201K4vYJGJIZzioC2UaTs","Singleton",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/string_utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"27384iB89NAKKt0tJGnSKbp","string_utils",void 0);t("string_utils",function(){function t(){}return t.getSecondLine=function(t){var n=t.split("\n");return n.length<2?null:n[1].trim()},t.removeLeadingZeros=function(t){if(!t.startsWith("0x"))return t;for(var n=t.slice(2);n.length>0&&"0"===n[0];)n=n.slice(1);return n="0x"+n},t.truncateString=function(t){return t.length<=7?t:t.slice(0,3)+"..."+t.slice(-4)},t.sliceLastN=function(t,n){return n<=0||n>=t.length?"":t.slice(t.length-n)},t.getNumberFromSymbol=function(t){var n=this.getHashFromSymbol(t),r=BigInt(n);return Number(r)},t.getHashFromSymbol=function(t){var n=t.toString();return 0!==n.indexOf("Symbol(")?t:n.slice(7,-1)},t.addStringToArray=function(t,n){-1===t.indexOf(n)&&t.push(n)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/temp_data.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b0e25pkQlVO2q3QYb9DG0fi","temp_data",void 0),t("temp_data",function(){function t(){this.tradeAsset=void 0,this.tradeTargetPlayer=void 0}var n=t.prototype;return n.setTradeInfo=function(t,e){this.tradeAsset=t,this.tradeTargetPlayer=e},n.getTradeInfo=function(){return[this.tradeAsset,this.tradeTargetPlayer]},e(t,null,[{key:"instance",get:function(){return t._instance||(t._instance=new t),t._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var s;n._RF.push({},"d14e046qVRM64qyg0X0aGwn","test",void 0);var c=r.ccclass;r.property,t("test",c("test")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/time_utils.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"c6be3VlEfVCrY8g3GPpt2JU","time_utils",void 0);t("time_utils",function(){function t(){}return t.calculateRemainingTime=function(t,r,o,n){var e=r-t;return Math.floor(e/3600)+"H "+Math.ceil(e%3600/60)+"M ("+Math.floor((t-o)/n)+"/"+Math.floor((r-o)/n)+" BLOCKS)"},t.calculateRemainingTimeOnlyMinutes=function(t,r,o,n){var e=r-t;return Math.ceil(e/60)+"M ("+Math.floor((t-o)/n)+"/"+Math.floor((r-o)/n)+" BLOCKS)"},t.formatSeconds=function(t){var r="",o=Math.floor(t/86400);o>0&&(r+=o+" Day ");var n=Math.floor(t%86400/3600);n>0&&(r+=n+" Hour ");var e=Math.floor(t%3600/60);e>0&&(r+=e+" Minute ");var a=Math.floor(t%60);return a>0&&(r+=a+" Second "),r},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/title-money.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts"],(function(e){var n,t,i,r,a,o,c,l,s,u,p,d,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,l=e._decorator,s=e.Label,u=e.log,p=e.Component},function(e){d=e.ponzi_controller},function(e){g=e.ccc_msg}],execute:function(){var y,m,f,h,_;c._RF.push({},"1f072PXdu1KhajgTKS+uklP","title-money",void 0);var b=l.ccclass,v=l.property;e("title_money",(y=b("title_money"),m=v({type:s}),y((_=n((h=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,i(n,"moneyLabel",_,r(n)),n._inited=!1,n._gameId=null,n}t(n,e);var c=n.prototype;return c.start=function(){},c.update=function(e){this._inited||this.init()},c.init=function(){var e=a(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=globalThis.ponzi.currentPlayer){e.next=3;break}return e.abrupt("return");case 3:return u("title-money inited"),this._inited=!0,t=null,e.prev=6,e.next=9,null==window.queryValue?void 0:window.queryValue(window.env.components.Player,n);case 9:t=e.sent,this.moneyLabel.string=this.getBalanceString(t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t=null;case 16:this.registerListeners();case 17:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),c.registerListeners=function(){var e=this,n=globalThis.ponzi.currentPlayer;d.instance.on(g.on_player_update,(function(t){var i=t.entity,r=(t.oldObj,t.newObj);n==i&&(e.moneyLabel.string=e.getBalanceString(r))})),d.instance.on(g.on_game_update,(function(n){n.oldObj;var t=n.newObj;u("game update ,old id is:",e._gameId),u("game update ,new id is:",t.gameId),e._gameId!=t.gameId&&(e._inited=!1)}))},c.getBalanceString=function(e){return"BALANCE $"+e.money},n}(p)).prototype,"moneyLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/toggle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,i,n,l,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.Node,c=e.Component}],execute:function(){var s,u,p,g,f,y,v;n._RF.push({},"5994bopob5Cv4DCK56zzKaF","toggle",void 0);var b=l.ccclass,h=l.property;e("toggle",(s=b("toggle"),u=h({type:a}),p=h({type:a}),s((y=t((f=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"normal",y,i(t)),o(t,"select",v,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.setSelected=function(e){this.normal.active=!e,this.select.active=e},t}(c)).prototype,"normal",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(f.prototype,"select",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=f))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/trade_input_price.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ccc_msg.ts","./ponzi-controller.ts","./temp_data.ts"],(function(e){var t,n,r,i,o,a,c,s,u,l,p,d,f,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.EditBox,l=e.Component,p=e.log,d=e.error},function(e){f=e.ccc_msg},function(e){h=e.ponzi_controller},function(e){g=e.temp_data}],execute:function(){var _,b,v,y,C;c._RF.push({},"405c1e05X1AlbJ3m5SdZ5c6","trade_input_price",void 0);var x=s.ccclass,m=s.property;e("trade_input_price",(_=x("trade_input_price"),b=m({type:u}),_((C=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"editBox",C,i(t)),t}n(t,e);var c=t.prototype;return c.start=function(){},c.update=function(e){},c.onBtnCloseClicked=function(){this.node.active=!1},c.onConfirmClicked=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("Confirm",this.editBox.textLabel.string),t=parseInt(this.editBox.textLabel.string),e.next=4,this.checkSelfMoney(t);case 4:if(e.sent){e.next=8;break}return h.instance.sendCCCMsg(f.single_button_dialog,{content:"You don't have enough money.",btnText:"OK"}),e.abrupt("return");case 8:return h.instance.sendCCCMsg(f.network_block_ui,!0),e.prev=9,n=g.instance.getTradeInfo(),e.next=13,null==window.trade?void 0:window.trade(n[1],n[0],this.editBox.textLabel.string);case 13:h.instance.sendCCCMsg(f.single_button_dialog,{content:"Trade has been sent, please wait.",btnText:"OK"}),this.node.active=!1,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),h.instance.sendCCCMsg(f.single_button_dialog,{content:"Trade failed, conditions not met.",btnText:"OK"});case 20:return e.prev=20,h.instance.sendCCCMsg(f.network_block_ui,!1),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),c.checkSelfMoney=function(){var e=o(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=globalThis.ponzi.currentPlayer,e.next=4,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.Player,n);case 4:if(r=e.sent,p("Check asset list assetList:",r),!(r.money>=t)){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 11:return e.prev=11,e.t0=e.catch(0),d("You don't have enough money."),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),t}(l)).prototype,"editBox",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/trade_parter_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toggle.ts","./item_asset.ts"],(function(t){var e,n,i,r,s,o,a,l,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,a=t.Label,l=t.Node,u=t.Component},function(t){c=t.toggle},function(t){p=t.item_asset}],execute:function(){var d,y,g,f,h,b,m,_,v;s._RF.push({},"e6d36LpflZAVrHvuiNRf44x","trade_parter_item",void 0);var x=o.ccclass,A=o.property;t("trade_parter_item",(d=x("trade_parter_item"),y=A({type:a}),g=A({type:l}),f=A({type:c}),d((m=e((b=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"labelName",m,r(e)),i(e,"assetParent",_,r(e)),i(e,"toggle",v,r(e)),e.entity=void 0,e}n(e,t);var s=e.prototype;return s.start=function(){},s.update=function(t){},s.setSelected=function(t){this.toggle.setSelected(t)},s.init=function(t,e,n,i,r,s,o){this.labelName.string=t,this.setAssetCountByIndex(0,e),this.setAssetCountByIndex(1,n),this.setAssetCountByIndex(2,i),this.setAssetCountByIndex(3,r),this.setAssetCountByIndex(4,s),this.setAssetCountByIndex(5,o)},s.setAssetCountByIndex=function(t,e){this.assetParent.children[t].getComponent(p).label.string=e.toString()},e}(u)).prototype,"labelName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(b.prototype,"assetParent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(b.prototype,"toggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=b))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/trade-ask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ponzi-controller.ts","./ccc_msg.ts","./string_utils.ts"],(function(e){var t,n,r,i,a,c,o,s,l,u,p,d,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,l=e.Label,u=e.Node,p=e.Component},function(e){d=e.ponzi_controller},function(e){f=e.ccc_msg},function(e){b=e.string_utils}],execute:function(){var g,h,v,_,w,C,k,y,m;o._RF.push({},"293aazEYTtEbpomexLptRJM","trade-ask",void 0);var L=s.ccclass,x=s.property;e("trade_ask",(g=L("trade_ask"),h=x({type:l}),v=x({type:l}),_=x({type:u}),g((k=t((C=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,r(t,"labelLine1",k,i(t)),r(t,"labelLine2",y,i(t)),r(t,"iconParent",m,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},o.init=function(e,t,n){for(var r=0;r<this.iconParent.children.length;r++)this.iconParent.children[r].active=r===n-1;this.labelLine1.string="User "+b.sliceLastN(e,6)+" wants to buy your "+this.getAssetName(n)+" for",this.labelLine2.string="$"+t},o.onBtnAcceptClicked=function(){var e=a(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.instance.sendCCCMsg(f.network_block_ui,!0),e.prev=1,e.next=4,null==window.acceptTrade?void 0:window.acceptTrade();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),d.instance.sendCCCMsg(f.single_button_dialog,{content:"Accept failed",btnText:"OK"});case 9:return e.prev=9,d.instance.sendCCCMsg(f.network_block_ui,!1),e.finish(9);case 12:this.node.active=!1;case 13:case"end":return e.stop()}}),e,this,[[1,6,9,12]])})));return function(){return e.apply(this,arguments)}}(),o.onBtnRejectClicked=function(){var e=a(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.instance.sendCCCMsg(f.network_block_ui,!0),e.prev=1,e.next=4,null==window.rejectTrade?void 0:window.rejectTrade();case 4:this.node.active=!1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),d.instance.sendCCCMsg(f.single_button_dialog,{content:"Accept failed",btnText:"OK"});case 10:return e.prev=10,d.instance.sendCCCMsg(f.network_block_ui,!1),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),o.getAssetName=function(e){return 1===e?"GPU":2===e?"bitcoin":3===e?"battery":4===e?"leiter":5===e?"gold":6===e?"oil":"unknown asset"},t}(p)).prototype,"labelLine1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(C.prototype,"labelLine2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(C.prototype,"iconParent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=C))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/trade-asset-item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,n,o,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Node,s=e.Component}],execute:function(){var c,u,p,m,d,f,g;n._RF.push({},"00e3bOPa+pGmr23g33/bwXz","trade-asset-item",void 0);var y=o.ccclass,b=o.property;e("trade_asset_item",(c=y("trade_asset_item"),u=b({type:l}),p=b({type:l}),c((f=t((d=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"normalImage",f,i(t)),a(t,"selectedImage",g,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.setSelected=function(e){this.normalImage.active=!e,this.selectedImage.active=e},t}(s)).prototype,"normalImage",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(d.prototype,"selectedImage",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=d))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/trade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./trade-asset-item.ts","./ponzi-controller.ts","./ccc_msg.ts","./trade_parter_item.ts","./string_utils.ts","./temp_data.ts","./popeffect.ts"],(function(t){var e,n,r,s,a,i,o,c,u,l,p,d,h,f,b,g,x,v,y,m,_,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.asyncToGenerator,i=t.regeneratorRuntime,o=t.createForOfIteratorHelperLoose},function(t){c=t.cclegacy,u=t._decorator,l=t.Node,p=t.Component,d=t.instantiate,h=t.Vec3,f=t.log,b=t.error},function(t){g=t.trade_asset_item},function(t){x=t.ponzi_controller},function(t){v=t.ccc_msg},function(t){y=t.trade_parter_item},function(t){m=t.string_utils},function(t){_=t.temp_data},function(t){C=t.popeffect}],execute:function(){var k,w,P,I,T,A,E,M,z;c._RF.push({},"46d93LmPf1IGaA1Ix4Vqbkb","trade",void 0);var L=u.ccclass,V=u.property;t("trade",(k=L("trade"),w=V({type:l}),P=V({type:l}),I=V({type:l}),k((E=e((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,r(e,"assetsParent",E,s(e)),r(e,"partnerParent",M,s(e)),r(e,"tradeItemModel",z,s(e)),e.assetIndex=-1,e.partnerEntity=void 0,e._inited=!1,e}n(e,t);var c=e.prototype;return c.start=function(){this.tradeItemModel.active=!1},c.update=function(t){this._inited||this.init()},c.onCloseClicked=function(){this.hide()},c.show=function(){this.node.active=!0;var t=this.node.getComponent(C);t&&t.show()},c.hide=function(){var t=this.node.getComponent(C);t?t.hide():this.node.active=!1},c.reset=function(){this._inited=!1,this.partnerEntity=null,this.assetIndex=-1,this._resetAssets()},c.onTradeClicked=function(){var t=a(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==this.assetIndex){t.next=3;break}return x.instance.sendCCCMsg(v.single_button_dialog,{content:"Please choose an asset first.",btnText:"OK"}),t.abrupt("return");case 3:if(this.partnerEntity){t.next=6;break}return x.instance.sendCCCMsg(v.single_button_dialog,{content:"Please choose an trade partner first.",btnText:"OK"}),t.abrupt("return");case 6:return e=globalThis.ponzi.currentPlayer,t.next=9,this.checkPartnerAsset(e,this.assetIndex);case 9:if(t.sent){t.next=13;break}return x.instance.sendCCCMsg(v.single_button_dialog,{content:"You has no this asset.",btnText:"OK"}),t.abrupt("return");case 13:return t.next=15,this.checkPartnerAsset(this.partnerEntity,this.assetIndex);case 15:if(t.sent){t.next=19;break}return x.instance.sendCCCMsg(v.single_button_dialog,{content:"Your partner has no this asset.",btnText:"OK"}),t.abrupt("return");case 19:_.instance.setTradeInfo(this.assetIndex,this.partnerEntity),this.node.active=!1,this.reset(),x.instance.sendCCCMsg(v.show_trade_input,null);case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.onAssetItemClicked=function(t){var e=this,n=t.target,r=this.assetsParent.children;r.forEach((function(t){t.getComponent(g).setSelected(n===t),n===t&&(e.assetIndex=r.indexOf(n)+1)}))},c.onParterBoxClicked=function(t){var e=this,n=t.target.parent;this.partnerParent.children.forEach((function(t){var r=t.getComponent(y);r.setSelected(n===t),n===t&&(e.partnerEntity=r.entity)}))},c.init=function(){var t=a(i().mark((function t(){var e,n,r,s,a,c,u,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._inited=!0,this.partnerParent.removeAllChildren(),t.next=4,this.getPartners();case 4:e=t.sent,n=o(e);case 6:if((r=n()).done){t.next=29;break}return s=r.value,a=null,t.prev=9,t.next=12,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.AssetsList,s);case 12:a=t.sent,t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(9),f("Can not find assetslist on entity"),t.abrupt("continue",27);case 19:(c=d(this.tradeItemModel)).active=!0,c.parent=this.partnerParent,c.position=h.ZERO,(u=c.getComponent(y)).entity=s,l=m.truncateString(m.getHashFromSymbol(s)),u.init(l,a.gpu,a.bitcoin,a.battery,a.leiter,a.gold,a.oil);case 27:t.next=6;break;case 29:case"end":return t.stop()}}),t,this,[[9,15]])})));return function(){return t.apply(this,arguments)}}(),c.checkPartnerAsset=function(){var t=a(i().mark((function t(e,n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f("Check asset list assetIndex:",n),t.prev=1,t.next=4,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.AssetsList,e);case 4:if(r=t.sent,f("Check asset list assetList:",r),1!=n){t.next=10;break}return t.abrupt("return",r.gpu>0);case 10:if(2!=n){t.next=14;break}return t.abrupt("return",r.bitcoin>0);case 14:if(3!=n){t.next=18;break}return t.abrupt("return",r.battery>0);case 18:if(4!=n){t.next=22;break}return t.abrupt("return",r.leiter>0);case 22:if(5!=n){t.next=26;break}return t.abrupt("return",r.gold>0);case 26:if(6!=n){t.next=30;break}return t.abrupt("return",r.oil>0);case 30:b("Unexpected asset index:",n);case 31:t.next=37;break;case 33:return t.prev=33,t.t0=t.catch(1),b("Can not find assetslist on entity"),t.abrupt("return",!1);case 37:case"end":return t.stop()}}),t,null,[[1,33]])})));return function(e,n){return t.apply(this,arguments)}}(),c.getPartners=function(){var t=a(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=globalThis.ponzi.currentPlayer,t.next=3,null==window.queryValue?void 0:window.queryValue(globalThis.env.components.TransactionList,e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",n.list);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c._resetAssets=function(){this.assetsParent.children.forEach((function(t){t.getComponent(g).setSelected(!1)}))},e}(p)).prototype,"assetsParent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(A.prototype,"partnerParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(A.prototype,"tradeItemModel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=A))||T));c._RF.pop()}}}));

System.register("chunks:///_virtual/TradeListItem.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"60f0c6bPsZGiZMumBa6l3Er","TradeListItem",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/UnsolicitedTransactionObj.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"a9f7abiGsdPjopqeJNvQvmf","UnsolicitedTransactionObj",void 0);i("UnsolicitedTransactionObj",(function(){this.asset=void 0,this.money=void 0,this.from=void 0}));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});